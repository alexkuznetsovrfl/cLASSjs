"use strict";function ConstraintViolation(e,t){this.message=e,t&&(this.culprit=t)}function NoConstraintViolation(e){void 0!==e&&(this.checkedValue=e),this.message=""}function MandatoryValueConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function RangeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function StringLengthConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function IntervalConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function PatternConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function UniquenessConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function CardinalityConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ReferentialIntegrityConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function FrozenValueConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function OtherConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function EntityTypeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ModelClassConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ViewConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ObjectTypeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function AgentTypeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function KindConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function RoleConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function eNUMERATION(e,t){var a=0;if("string"!=typeof e)throw new Error("The first constructor argument of an enumeration must be a string!");if(this.name=e,Array.isArray(t)){if(!t.every(function(e){return"string"==typeof e}))throw new Error("A list of enumeration labels as the second constructor argument must be an array of strings!");this.labels=t,this.enumLitNames=this.labels,this.codeList=null}else{if(!("object"==typeof t&&Object.keys(t).length>0))throw new Error("Invalid Enumeration constructor argument: "+t);if(!Object.keys(t).every(function(e){return"string"==typeof t[e]}))throw new Error("All values of a code list map must be strings!");this.codeList=t,this.enumLitNames=Object.keys(this.codeList),this.labels=this.enumLitNames.map(function(e){return t[e]+" ("+e+")"})}for(this.MAX=this.enumLitNames.length,a=1;a<=this.enumLitNames.length;a++)this[this.enumLitNames[a-1].replace(/( |-)/g,"_").split("_").map(function(e){return e.toUpperCase()}).join("_")]=a;Object.freeze(this),eNUMERATION.instances[this.name]=this}function cLASS(e){var t=e.properties||{},a=e.methods||{},n=e.supertypeName,u=null,o=null,i=[];if(n&&!cLASS[n])throw"Specified supertype "+n+" has not been defined!";if(!Object.keys(t).every(function(e){return void 0!==t[e].range}))throw"No range defined for some property of class "+e.Name+" !";return o=function(a){n&&cLASS[n].call(this,a),Object.keys(t).forEach(function(e){var n,u=t[e].range,o=null,r=[],c=0,s=null;if("object"==typeof a&&a[e]){if(n=a[e],!((s=cLASS.check(e,t[e],n))instanceof NoConstraintViolation))throw s;if("string"==typeof u&&"object"!=typeof n&&(cLASS[u]||u.includes("|")))if(u.includes("|")){for(r=u.split("|"),c=0;c<r.length;c++)if((o=cLASS[r[c]])&&o.instances[String(n)]){this[e]=o.instances[String(n)];break}this[e]||(this[e]=n)}else this[e]=cLASS[u].instances[String(n)]||n;else this[e]=n}else void 0!==t[e].initialValue?"function"==typeof t[e].initialValue?i.push(e):this[e]=t[e].initialValue:"id"===e&&"AutoNumber"===u?"function"==typeof this.constructor.getAutoId?this[e]=this.constructor.getAutoId():void 0!==this.constructor.idCounter&&(this[e]=++this.constructor.idCounter):t[e].optional||(cLASS.isIntegerType(u)||cLASS.isDecimalType(u)?this[e]=0:"String"===u?this[e]="":"Boolean"===u?this[e]=!1:"object"==typeof u&&(["Array","ArrayList"].includes(u.dataType)?this[e]=[]:"Map"===u.dataType&&(this[e]={})));t[e].historySize&&(this.history=this.history||{},this.history[e]=t[e].decimalPlaces?new cLASS.RingBuffer(t[e].range,t[e].historySize,{decimalPlaces:t[e].decimalPlaces}):new cLASS.RingBuffer(t[e].range,t[e].historySize))},this),i.forEach(function(e){this[e]=t[e].initialValue.call(this)},this),"object"==typeof a&&Object.keys(a).forEach(function(e){t[e]||(this[e]=a[e])},this),!e.isComplexDatatype&&!e.isAbstract&&"id"in this&&(cLASS[e.Name].instances[String(this.id)]=this)},o.constructor=cLASS,o.Name=e.Name,e.isComplexDatatype&&(o.isComplexDatatype=!0),e.isAbstract&&(o.isAbstract=!0),e.shortLabel&&(o.shortLabel=e.shortLabel),e.primaryKey&&(o.primaryKey=e.primaryKey),e.tableName&&(o.tableName=e.tableName),n?(o.supertypeName=n,u=cLASS[n],(o.prototype=Object.create(u.prototype)).constructor=o,o.properties=Object.create(u.properties),Object.keys(t).forEach(function(e){o.properties[e]=t[e]})):(o.properties=t,o.prototype.set=function(e,t){var a=cLASS.check(e,this.constructor.properties[e],t);if(!(a instanceof NoConstraintViolation))throw a;this[e]=a.checkedValue},o.prototype.toString=function(){var e="",t="",a=0;return this.name?e=this.name:(e=this.constructor.shortLabel||this.constructor.Name,this.id&&(e+=":"+this.id)),t="{ ",Object.keys(this).forEach(function(e){var n=cLASS[this.constructor.Name].properties[e],u=n?n.shortLabel||n.label:e,o="";o=n&&"string"==typeof n.range&&cLASS[n.range]?n.maxCard&&n.maxCard>1?Array.isArray(this[e])?this[e].map(function(e){return e.id}).toString():JSON.stringify(Object.keys(this[e])):String(this[e].id):"function"==typeof this[e]?"a function":JSON.stringify(this[e]),void 0!==this[e]&&u&&(t+=(a>0?", ":"")+u+": "+o,a+=1)},this),"{ }"===(t+="}")&&(t=""),e+t},o.prototype.toRecord=function(){var e,t,a=this,n={},u={},o=[];return Object.keys(a).forEach(function(i){void 0!==a[i]&&(t=a[i],u=a.constructor.properties[i],e=u.range,u.maxCard&&u.maxCard>1?e.constructor&&e.constructor===cLASS?o=Array.isArray(t)?t.slice(0):Object.values(t):Array.isArray(t)?o=t.slice(0):console.log("Invalid non-array collection in toRecord!"):o=[t],o.forEach(function(t,a){["number","string","boolean"].includes(typeof t)||!t?o[a]=String(t):"Date"===e?o[a]=util.createIsoDateString(t):e.constructor&&e.constructor===cLASS?o[a]=t.id:Array.isArray(t)?o[a]=t.slice(0):o[a]=JSON.stringify(t)}),!u.maxCard||u.maxCard<=1?n[i]=o[0]:n[i]=o)}),n},o.prototype.getValueAsString=function(e){var t=void 0===t?void 0:t,a=this.constructor.properties[e],n=a.range,u=this[e],o=[],i="",r=0;if(void 0===u||null===u)return"";if(a.maxCard&&a.maxCard>1?Array.isArray(u)?o=u.slice(0):console.log("The value of a multi-valued datatype property like "+e+"must be an array!"):o=[u],o.forEach(function(u,i){"function"==typeof a.val2str?o[i]=a.val2str(u):t&&n instanceof t?o[i]=n.labels[u-1]:["number","string","boolean"].includes(typeof u)||!u?o[i]=String(u):"Date"===n?o[i]=util.createIsoDateString(u):Array.isArray(u)?o[i]=u.slice(0):"string"==typeof n&&cLASS[n]?"object"==typeof u&&void 0!==u.id?o[i]=u.id:(o[i]=u.toString(),a.stringified=!0,console.log("Property "+this.constructor.Name+"::"+e+" has a cLASS object value without an 'id' slot!")):(o[i]=JSON.stringify(u),a.stringified=!0)},this),i=o[0],a.maxCard&&a.maxCard>1){for(i="["+i,r=1;r<o.length;r++)i+=", "+o[r];i+="]"}return i},o.createObjectFromRecord=function(e){var t={};try{t=new o(e)}catch(e){console.log(e.constructor.name+" while deserializing a "+o.Name+" record: "+e.message),t=null}return t}),Object.keys(a).forEach(function(e){o.prototype[e]=a[e]}),cLASS[e.Name]=o,e.isAbstract||(cLASS[e.Name].instances={}),o}function sTORAGEmANAGER(e){if("object"!=typeof e||"string"!=typeof e.name||!["LocalStorage","IndexedDB","MariaDB"].includes(e.name))throw new ConstraintViolation("Invalid storage adapter name!");if(!e.dbName)throw new ConstraintViolation("Storage adapter: missing DB name!");this.adapter=e,"LocalStorage"===e.name&&Object.keys(cLASS).forEach(function(e){cLASS[e].instances&&sTORAGEmANAGER.adapters.LocalStorage.retrieveLsTable(cLASS[e])}),sTORAGEmANAGER.adapters[this.adapter.name].currentAdapter=e}Array.max=function(e){return Math.max.apply(Math,e)},Array.min=function(e){return Math.min.apply(Math,e)},Array.prototype.clone=function(){return this.slice(0)},Array.prototype.merge=function(e){return Array.prototype.push.apply(this,e)},Array.prototype.isEqualTo=function(e){return this.length===e.length&&this.every(function(t,a){return t===e[a]})},NoConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),NoConstraintViolation.prototype.constructor=NoConstraintViolation,MandatoryValueConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),MandatoryValueConstraintViolation.prototype.constructor=MandatoryValueConstraintViolation,RangeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),RangeConstraintViolation.prototype.constructor=RangeConstraintViolation,StringLengthConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),StringLengthConstraintViolation.prototype.constructor=StringLengthConstraintViolation,IntervalConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),IntervalConstraintViolation.prototype.constructor=IntervalConstraintViolation,PatternConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),PatternConstraintViolation.prototype.constructor=PatternConstraintViolation,UniquenessConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),UniquenessConstraintViolation.prototype.constructor=UniquenessConstraintViolation,CardinalityConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),CardinalityConstraintViolation.prototype.constructor=CardinalityConstraintViolation,ReferentialIntegrityConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ReferentialIntegrityConstraintViolation.prototype.constructor=ReferentialIntegrityConstraintViolation,FrozenValueConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),FrozenValueConstraintViolation.prototype.constructor=FrozenValueConstraintViolation,OtherConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),OtherConstraintViolation.prototype.constructor=OtherConstraintViolation,EntityTypeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),EntityTypeConstraintViolation.prototype.constructor=EntityTypeConstraintViolation,ModelClassConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ModelClassConstraintViolation.prototype.constructor=ModelClassConstraintViolation,ViewConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ViewConstraintViolation.prototype.constructor=ViewConstraintViolation,ObjectTypeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ObjectTypeConstraintViolation.prototype.constructor=ObjectTypeConstraintViolation,AgentTypeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),AgentTypeConstraintViolation.prototype.constructor=AgentTypeConstraintViolation,KindConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),KindConstraintViolation.prototype.constructor=KindConstraintViolation,RoleConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),RoleConstraintViolation.prototype.constructor=RoleConstraintViolation;var util={};util.createIsoDateString=function(e){return e.toISOString().substring(0,10)},util.nextYear=function(){return(new Date).getFullYear()+1},util.capitalizeFirstChar=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},util.mergeObjects=function(){var e,t=0,a=0,n=arguments.length,u=0,o=!1,i=!1,r=null,c=[],s="";for(t=0;t<n;t++)if(void 0!==(r=arguments[t]))if(Array.isArray(r)){if(i)throw"util.mergeObjects: incompatible objects were found! Trying to merge an Array with an Object! Expected Array arguments only!";o=!0,e=(e=e||[]).concat(r)}else{if("object"!=typeof r)throw"util.mergeObjects: only arguments of type Array or Object are allowed, but '"+typeof arguments[t]+"' type was found for argument number "+t;if(o)throw"util.mergeObjects: incompatible objects were found! Trying to merge an Object with an Array! Expected Object arguments only!";for(e=e||{},i=!0,u=(c=Object.keys(r)).length,a=0;a<u;a++)e[s=c[a]]=r[s]}return e},util.class2TableName=function(e){return e.charAt(0)===e.charAt(0).toUpperCase()?"y"===e.charAt(e.length-1)?util.camelToLowerCase(e.slice(0,e.length-1))+"ies":util.camelToLowerCase(e)+"s":"Y"===e.charAt(e.length-1)?util.invCamelToUppercase(e.slice(0,e.length-1))+"IES":util.invCamelToUppercase(e)+"S"},util.table2ClassName=function(e){var t=util.lowercaseToCamel(e);return"s"===(t=t.charAt(0).toUpperCase()+t.slice(1)).charAt(t.length-1)&&(t=t.slice(0,t.length-1)),t},util.property2ColumnName=function(e){return util.camelToLowerCase(e)},util.column2PropertyName=function(e){return util.lowercaseToCamel(e)},util.camelToLowerCase=function(e){return e=e.charAt(0).toLowerCase()+e.slice(1),e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},util.invCamelToUppercase=function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([a-z])/g,function(e){return"_"+e.toUpperCase()})},util.lowercaseToCamel=function(e){return e.replace(/(\_[a-z])/g,function(e){return e.toUpperCase().replace("_","")})},util.JsIdentifierPattern=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/,util.isIntegerString=function(e){return"string"==typeof e&&0==e.search(/^-?[0-9]+$/)},util.createRecordFromObject=function(e){var t,a={},n="";for(n in e)t=e[n],e.hasOwnProperty(n)&&("string"==typeof t||"number"==typeof t||"boolean"==typeof t||t instanceof Date||Array.isArray(t)&&!t.some(function(e){return"object"==typeof e}))&&(t instanceof Date?a[n]=t.toISOString():Array.isArray(t)?a[n]=t.slice(0):a[n]=t);return a},util.cloneRecord=util.createRecordFromObject,util.cloneObject=function(e){var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(a){t[a]="object"==typeof e[a]?util.cloneObject(e[a]):e[a]}),t},util.mergeObjects=function(){var e=0,t=0,a=null,n={},u=[],o="";for(e=0;e<arguments.length;e++)if((a=arguments[e])&&"object"==typeof a)for(u=Object.keys(a),t=0;t<u.length;t++)n[o=u[t]]=a[o];return n},util.swapArrayElements=function(e,t,a){var n="object"==typeof e[t]?Object.assign({},e[t]):e[t];e[t]="object"==typeof e[a]?Object.assign({},e[a]):e[a],e[a]=n},util.shuffleArray=function(e){var t,a,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a},util.cartesianProduct=function(e){return e.reduce(function(e,t){return e.map(function(e){return t.map(function(t){return e.concat(t)})}).reduce(function(e,t){return e.concat(t)},[])},[[]])},eNUMERATION.prototype.isValidEnumLitOrIndex=function(e){return Number.isInteger(e)&&e>0&&e<this.MAX},eNUMERATION.prototype.enumIndexesToNames=function(e){if(!Array.isArray(e))throw new Error("The argument must be an Array!");return e.map(function(e){return this.enumLitNames[e-1]},this).join(", ")},eNUMERATION.instances={},cLASS.isIntegerType=function(e){return["Integer","PositiveInteger","AutoNumber","NonNegativeInteger"].includes(e)||e instanceof eNUMERATION},cLASS.isDecimalType=function(e){return["Number","Decimal","Percent","ClosedUnitInterval","OpenUnitInterval"].includes(e)},cLASS.patterns={ID:/^([a-zA-Z0-9][a-zA-Z0-9_\-]+[a-zA-Z0-9])$/,EMAIL:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,URL:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,INT_PHONE_NO:/^\+(?:[0-9] ?){6,14}[0-9]$/},cLASS.check=function(e,t,a,n){var u=null,o=[],i=t.patternMessage||"",r=t.minCard||0,c=t.maxCard||1,s=t.min||0,l=t.max,f=t.range,d=t.pattern;if(void 0===a||""===a)return t.optional?new NoConstraintViolation:new MandatoryValueConstraintViolation("A value for "+e+" is required!");if(1===c)o=[a];else if(Array.isArray(a))o=a;else{if("string"!=typeof f||!cLASS[f])return new RangeConstraintViolation("Values for "+e+" must be arrays or maps of IDs to cLASS instances!");if(t.ordered)return new RangeConstraintViolation("Values for the ordered property "+e+" must be arrays, and not maps!");o=Object.keys(a).map(function(e){return a[e]})}switch(cLASS.isIntegerType(f)&&o.forEach(function(e,t){"string"==typeof e&&(o[t]=parseInt(e))}),cLASS.isDecimalType(f)&&o.forEach(function(e,t){"string"==typeof e&&(o[t]=parseFloat(e))}),f){case"String":o.forEach(function(t){"string"!=typeof t&&(u=new RangeConstraintViolation("Values for "+e+" must be strings!"))});break;case"NonEmptyString":o.forEach(function(t){"string"==typeof t&&""!==t.trim()||(u=new RangeConstraintViolation("Values for "+e+" must be non-empty strings!"))});break;case"Identifier":o.forEach(function(t){"string"==typeof t&&""!==t.trim()&&cLASS.patterns.ID.test(t)||(u=new RangeConstraintViolation("Values for "+e+" must be valid identifiers/names!"))});break;case"Email":o.forEach(function(t){"string"==typeof t&&cLASS.patterns.EMAIL.test(t)||(u=new RangeConstraintViolation("Values for "+e+" must be valid email addresses!"))});break;case"URL":o.forEach(function(t){"string"==typeof t&&cLASS.patterns.URL.test(t)||(u=new RangeConstraintViolation("Values for "+e+" must be valid URLs!"))});break;case"PhoneNumber":o.forEach(function(t){"string"==typeof t&&cLASS.patterns.INT_PHONE_NO.test(t)||(u=new RangeConstraintViolation("Values for "+e+" must be valid international phone numbers!"))});break;case"Integer":o.forEach(function(t){Number.isInteger(t)||(u=new RangeConstraintViolation("The value of "+e+" must be an integer!"))});break;case"NonNegativeInteger":o.forEach(function(t){(!Number.isInteger(t)||t<0)&&(u=new RangeConstraintViolation("The value of "+e+" must be a non-negative integer!"))});break;case"AutoNumber":1===o.length?(!Number.isInteger(o[0])||o[0]<1)&&(u=new RangeConstraintViolation("The value of "+e+" must be a positive integer!")):u=new RangeConstraintViolation("The value of "+e+" must not be a collection like "+o);break;case"PositiveInteger":o.forEach(function(t){(!Number.isInteger(t)||t<1)&&(u=new RangeConstraintViolation("The value of "+e+" must be a positive integer!"))});break;case"Number":case"Decimal":case"Percent":o.forEach(function(t){"number"!=typeof t&&(u=new RangeConstraintViolation("The value of "+e+" must be a (decimal) number!"))});break;case"ClosedUnitInterval":o.forEach(function(t){"number"!=typeof t?u=new RangeConstraintViolation("The value of "+e+" must be a (decimal) number!"):(t<0||t>1)&&(u=new RangeConstraintViolation("The value of "+e+" must be a number in [0,1]!"))});break;case"OpenUnitInterval":o.forEach(function(t){"number"!=typeof t?u=new RangeConstraintViolation("The value of "+e+" must be a (decimal) number!"):(t<=0||t>=1)&&(u=new RangeConstraintViolation("The value of "+e+" must be a number in (0,1)!"))});break;case"Boolean":o.forEach(function(t,a){"string"==typeof t?["true","yes"].includes(t)?o[a]=!0:["no","false"].includes(t)?o[a]=!1:u=new RangeConstraintViolation("The value of "+e+" must be either 'true'/'yes' or 'false'/'no'!"):"boolean"!=typeof t&&(u=new RangeConstraintViolation("The value of "+e+" must be either 'true' or 'false'!"))});break;case"Date":o.forEach(function(t,a){"string"==typeof t&&/\d{4}-(0\d|1[0-2])-([0-2]\d|3[0-1])/.test(t)&&!isNaN(Date.parse(t))?o[a]=new Date(t):t instanceof Date||(u=new RangeConstraintViolation("The value of "+e+" must be either a Date value or an ISO date string. "+t+" is not admissible!"))});break;case"DateTime":o.forEach(function(t,a){"string"!=typeof t||isNaN(Date.parse(t))?t instanceof Date||(u=new RangeConstraintViolation("The value of "+e+" must be either a Date value or an ISO date-time string. "+t+" is not admissible!")):o[a]=new Date(t)});break;default:f instanceof eNUMERATION||"string"==typeof f&&eNUMERATION[f]?("string"==typeof f&&(f=eNUMERATION[f]),o.forEach(function(t){(!Number.isInteger(t)||t<1||t>f.MAX)&&(u=new RangeConstraintViolation("The value "+t+" is not an admissible enumeration integer for "+e))})):Array.isArray(f)?o.forEach(function(t){-1===f.indexOf(t)&&(u=new RangeConstraintViolation("The "+e+" value "+t+" is not in value list "+f.toString()))}):"string"==typeof f&&cLASS[f]?o.forEach(function(t,a){var i=[],r={};cLASS[f].isComplexDatatype||t instanceof cLASS[f]?cLASS[f].isComplexDatatype&&"object"==typeof t&&(i=Object.keys(t),r=cLASS[f].properties,Object.keys(r).every(function(e){return!!r[e].optional||e in t})&&i.every(function(e){return!!r[e]})?i.forEach(function(e){var a=cLASS.check(e,r[e],t[e]);if(!(a instanceof NoConstraintViolation))throw a;t[e]=a.checkedValue}):u=new RangeConstraintViolation("The value of "+e+" must be an instance of "+f+" or a compatible record!"+JSON.stringify(t)+" is not admissible!")):cLASS[f].instances[String(t)]?t=o[a]=cLASS[f].instances[String(t)]:n&&n.checkRefInt&&(u=new ReferentialIntegrityConstraintViolation("The value "+t+" of property '"+e+"' is not an ID of any "+f+" object!"))}):"string"==typeof f&&f.includes("|")?o.forEach(function(t,a){var i=[];i=f.split("|"),"object"==typeof t?i.some(function(e){return t instanceof cLASS[e]})?t=o[a]=t.id:u=ReferentialIntegrityConstraintViolation("The object "+JSON.stringify(t)+" is not an instance of any class from "+f+"!"):Number.isInteger(t)?n&&n.checkRefInt&&(cLASS[f].instances[String(t)]||(u=new ReferentialIntegrityConstraintViolation("The value "+t+" of property '"+e+"' is not an ID of any "+f+" object!"))):"string"==typeof t?isNaN(parseInt(t))||(t=o[a]=parseInt(t)):u=new RangeConstraintViolation("The value ("+t+") of property '"+e+"' is neither an integer nor a string!")}):"object"==typeof f&&void 0!==f.dataType?o.forEach(function(t){var a=0;switch("object"!=typeof t&&(u=new RangeConstraintViolation("The value of "+e+" must be an object! "+JSON.stringify(t)+" is not admissible!")),f.dataType){case"Array":if(!Array.isArray(t)){u=new RangeConstraintViolation("The value of "+e+" must be an array! "+JSON.stringify(t)+" is not admissible!");break}if(t.length!==f.size){u=new RangeConstraintViolation("The value of "+e+" must be an array of length "+f.size+"! "+JSON.stringify(t)+" is not admissible!");break}for(a=0;a<t.length;a++)cLASS.isOfType(t[a],f.itemType)||(u=new RangeConstraintViolation("The items of "+e+" must be of type "+f.itemType+"! "+JSON.stringify(t)+" is not admissible!"));break;case"ArrayList":if(!Array.isArray(t)){u=new RangeConstraintViolation("The value of "+e+" must be an array! "+JSON.stringify(t)+" is not admissible!");break}for(a=0;a<t.length;a++)cLASS.isOfType(t[a],f.itemType)||(u=new RangeConstraintViolation("The items of "+e+" must be of type "+f.itemType+"! "+JSON.stringify(t)+" is not admissible!"))}}):f===Object&&o.forEach(function(t){t instanceof Object||(u=new RangeConstraintViolation("The value of "+e+" must be a JS object! "+JSON.stringify(t)+" is not admissible!"))})}if(u)return u;if("String"!==f&&"NonEmptyString"!==f||o.forEach(function(t){void 0!==s&&t.length<s?u=new StringLengthConstraintViolation("The length of "+e+" must not be smaller than "+s):void 0!==l&&t.length>l?u=new StringLengthConstraintViolation("The length of "+e+" must not be greater than "+l):void 0===d||d.test(t)||(u=new PatternConstraintViolation(i||t+"does not comply with the pattern defined for "+e))}),"Integer"!==f&&"NonNegativeInteger"!==f&&"PositiveInteger"!==f||o.forEach(function(t){void 0!==s&&t<s?u=new IntervalConstraintViolation(e+" must be greater than "+s):void 0!==l&&t>l&&(u=new IntervalConstraintViolation(e+" must be smaller than "+l))}),u)return u;if(c>1){if(r>0&&o.length<r)return new CardinalityConstraintViolation("A collection of at least "+r+" values is required for "+e);if(o.length>c)return new CardinalityConstraintViolation("A collection value for "+e+" must not have more than "+c+" members!")}return new NoConstraintViolation(1===c?o[0]:o)},cLASS.range2JsDataType=function(e){var t="";switch(e){case"String":case"NonEmptyString":case"Email":case"URL":case"PhoneNumber":case"Date":t="string";break;case"Integer":case"NonNegativeInteger":case"PositiveInteger":case"Number":case"AutoNumber":case"Decimal":case"Percent":case"ClosedUnitInterval":case"OpenUnitInterval":t="number";break;case"Boolean":t="boolean";break;default:e instanceof eNUMERATION?t="number":"string"==typeof e&&cLASS[e]?t="string":"object"==typeof e&&(t="object")}return t},cLASS.isOfType=function(e,t){switch(t){case"String":return"string"==typeof e;case"NonEmptyString":return"string"==typeof e&&""!==e.trim();case"Integer":return Number.isInteger(e);case"NonNegativeInteger":return Number.isInteger(e)&&e>=0;case"PositiveInteger":return Number.isInteger(e)&&e>0;case"Decimal":return"number"==typeof e;case"ClosedUnitInterval":return"number"==typeof e&&e>=0&&e<=1;case"OpenUnitInterval":return"number"==typeof e&&e>0&&e<1;default:return!0}},cLASS.cOLLECTIONdATATYPE=function(e,t,a,n){this.type=e,this.itemType=t,this.size=a,this.optParams=n},cLASS.Array=function(e,t,a){if(!(this instanceof cLASS.Array))return new cLASS.cOLLECTIONdATATYPE("Array",{itemType:e,size:t,optParams:a});this.type="Array",this.itemType=e,this.size=t,a&&(a.constraints&&(this.constraints=a.constraints),a.decimalPlaces&&(this.decimalPlaces=a.decimalPlaces)),this.array=new Array(t)},cLASS.ArrayList=function(e,t){return t?{dataType:"ArrayList",itemType:e,constraints:t}:{dataType:"ArrayList",itemType:e}},cLASS.Map=function(e,t){return t?{dataType:"Map",itemType:e,constraints:t}:{dataType:"Map",itemType:e}},cLASS.RingBuffer=function(e,t,a){if(!(this instanceof cLASS.RingBuffer))return new cLASS.cOLLECTIONdATATYPE("RingBuffer",{itemType:e,size:t,optParams:a});this.type="RingBuffer",this.itemType=e,this.size=t,a&&(a.constraints&&(this.constraints=a.constraints),a.decimalPlaces&&(this.decimalPlaces=a.decimalPlaces)),this.first=0,this.last=-1,this.buffer=new Array(t)},cLASS.RingBuffer.prototype.nmrOfItems=function(){return-1===this.last?0:this.first<=this.last?this.last-this.first+1:this.last+this.size-this.first+1},cLASS.RingBuffer.prototype.add=function(e){this.nmrOfItems()<this.size?this.last++:(this.first=(this.first+1)%this.size,this.last=(this.last+1)%this.size),this.buffer[this.last]=e},cLASS.RingBuffer.prototype.toString=function(e){var t,a=0,n="[",u=1,o=this.nmrOfItems(),i=e?Math.min(e,o):o;if(0===o)return" ";for(a=0;a<i;a++)t=this.buffer[(this.first+a)%this.size],this.itemType instanceof eNUMERATION?t=this.itemType.labels[t-1]:cLASS.isDecimalType(this.itemType)&&(u=Math.pow(10,this.decimalPlaces),t=Math.round(t*u)/u),n+=t,a<i-1&&(n+=", ");return n+"]"},cLASS.RingBuffer.prototype.getSMA=function(e){var t=this.nmrOfItems(),a=0,n=0;for(e&&(t=Math.min(e,t)),a=0;a<t;a++)n+=this.buffer[(this.first+a)%this.size];return n/t};var dom={createElement:function(e,t){var a=document.createElement(e);return t&&(t.id&&(a.id=t.id),t.classValues&&(a.className=t.classValues),t.title&&(a.title=t.title),t.content&&(a.innerHTML=t.content),t.borderColor&&(a.style.borderColor=t.borderColor)),a},createTime:function(e){var t=document.createElement("time");return t.textContent=e.toLocaleDateString(),t.setAttribute("datetime",e.toISOString()),t},createImg:function(e){var t=document.createElement("img");return t.src=e.src,e.id&&(t.id=e.id),e.classValues&&(t.className=e.classValues),t},createOption:function(e){var t=document.createElement("option");return e.text&&(t.textContent=e.text),void 0!==e.value&&(t.value=e.value),t},createButton:function(e){var t=document.createElement("button");return e.type?t.type=e.type:t.type="button",e.id&&(t.id=e.id),e.name&&(t.name=e.name),e.classValues&&(t.className=e.classValues),e.title&&(t.title=e.title),e.handler&&t.addEventListener("click",e.handler),e.content?t.innerHTML=e.content:t.textContent=e.label||e.name,t},createLabeledOutputField:function(e){var t=document.createElement("output"),a=document.createElement("label");return e.name&&(t.name=e.name),void 0!==e.value&&(t.value=e.value),a.textContent=e.labelText,a.appendChild(t),a},createLabeledInputField:function(e){var t=document.createElement("input"),a=document.createElement("label");return e.name&&(t.name=e.name),e.type?t.type=e.type:t.type="text",void 0!==e.value&&(t.value=e.value),e.disabled&&(t.disabled="disabled"),a.textContent=e.labelText,a.appendChild(t),a},createLabeledChoiceControl:function(e,t,a,n){var u=document.createElement("input"),o=document.createElement("label");return u.type=e,u.name=t,u.value=a,o.appendChild(u),o.appendChild(n.includes("</")?dom.createElement("div",{content:n}):document.createTextNode(n)),o},createLabeledSelect:function(e){var t=document.createElement("select"),a=document.createElement("label");return e.name&&(t.name=e.name),void 0!==e.index&&(t.index=e.index),a.textContent=e.labelText,a.appendChild(t),a},fillSelectWithOptionsFromArrayList:function(e,t,a){e.innerHTML="",e.multiple||e.add(dom.createOption({text:" --- ",value:""}),null),t.forEach(function(t,n){var u=null,o=a&&a.primaryKey?t[a.primaryKey]:t.id;u="string"==typeof t?dom.createOption({text:t,value:n}):dom.createOption({text:a&&a.displayProp?t[a.displayProp]:o,value:o}),e.multiple&&a&&a.selection&&a.selection.includes(n+1)&&(u.selected=!0),e.add(u,null)})},fillSelectWithOptionsFromEntityMap:function(e,t,a){var n=0,u=[],o={},i=null,r="";for(e.innerHTML="",a&&a.noVoidOption||e.add(dom.createOption({value:"",text:"---"}),null),u=Object.keys(t),n=0;n<u.length;n++)o=t[u[n]],r=a&&a.displayProp?o[a.displayProp]:o.id,i=dom.createOption({value:o.id,text:r}),e.multiple&&a&&a.selection&&a.selection[u[n]]&&(i.selected=!0),e.add(i,null)}};dom.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});var oBJECTvIEW=function(e){var t={},a=e.modelObjects&&e.modelObjects instanceof Object;if(!(e.modelObject&&e.modelObject instanceof Object||a))throw ViewConstraintViolation("Creating an object view requires a (set of) model object(s)!");if(a){if(!e.fields)throw ViewConstraintViolation("A view def with multiple model objects requires field definitions!");if(!e.fields.every(function(e){return Array.isArray(e)||(e=[e]),e.every(function(e){return"string"==typeof e&&e.indexOf(".")>-1})}))throw ViewConstraintViolation("Field definitions based on multiple model objects need to be two-part strings with a dot as separator!")}a?this.modelObjects=e.modelObjects:(this.modelObject=e.modelObject,this.modelObjects={},this.modelObjects[e.modelObject.objectName]=e.modelObject),this.heading=e.heading,this.fields={},this.fieldValues={},this.fieldOrder=[],void 0===e.suppressNoValueFields?this.suppressNoValueFields=!0:this.suppressNoValueFields=e.suppressNoValueFields,e.fields?e.fields.forEach(function(e){var n,u=0,o=[],i=[],r="",c=null,s=0;for(o=Array.isArray(e)?e:[e],u=0;u<o.length;u++)if("string"==typeof(n=o[u])){if(a?(s=n.indexOf("."),r=n.substring(0,s),c=this.modelObjects[r],n=n.substring(s+1)):c=this.modelObject,!(t=c.properties)[n])throw new ViewConstraintViolation("View field "+n+" does not correspond to a model property!");if(this.suppressNoValueFields&&void 0===c[n])continue;this.fields[n]=util.cloneRecord(t[n]),"string"!=typeof t[n].range&&(cLASS[t[n].range.Name]?this.fields[n].range=t[n].range.Name:this.fields[n].range=t[n].range),this.fields[n].moName=c.objectName,this.fields[n].inputOutputMode="I/O",i.push(n)}else{if("object"!=typeof n)throw new ViewConstraintViolation("Neither property field nor defined field: "+n);t=this.modelObject.properties,this.fields[n.name]={moName:this.modelObject.objectName,label:n.label||t[n.name].label,hint:n.hint||t[n.name].hint,range:n.range||t[n.name].range,inputOutputMode:n.inputOutputMode},i.push(n.name),o.derivationFunction&&(this.fields[n.name].derivationFunction=n.derivationFunction),n.optional&&(this.fields[n.name].optional=!0)}1===o.length?this.fieldOrder.push(i[0]):this.fieldOrder.push(i)},this):(t=this.modelObject.properties,Object.keys(t).forEach(function(e){!t[e].label||this.suppressNoValueFields&&void 0===this.modelObject[e]&&void 0===t[e].dependsOn||(this.fieldOrder.push(e),this.fields[e]=t[e],this.fields[e].inputOutputMode="I/O")},this)),this.maxNmrOfEnumLitForChoiceButtonRendering=e.maxNmrOfEnumLitForChoiceButtonRendering||7,this.methods=e.methods||{},this.userActions=e.userActions||{},this.methods.set=function(e,t){var a=null,n=null,u=0,o=this.modelObjects[this.fields[e].moName],i=o.properties,r=this.fieldGroupSeparator,c=(i[e].range,this.dataBinding[this.viewMode][e]);if(void 0===t)return t=i[e]&&i[e].maxCard?[]:"",void(this[e]=t);if(Array.isArray(t)?this[e]=t.clone():this[e]=t,"INPUT"===c.tagName||"OUTPUT"===c.tagName)Array.isArray(t)?t.forEach(function(t,a){var n=cLASS.getValueAsString(o,e,t);0===a?c.value=n:c.value+=r+n}):c.value=cLASS.getValueAsString(o,e,t);else if("FIELDSET"===c.tagName&&c.classList.contains("radio-button-group"))for(n=c.querySelectorAll("input[type='radio']"),u=0;u<n.length;u++)(a=n[u]).value===String(t)&&(a.checked=!0);else if("FIELDSET"===c.tagName&&c.classList.contains("checkbox-group"))for(n=c.querySelectorAll("input[type='checkbox']"),u=0;u<n.length;u++)a=n[u],t.indexOf(parseInt(a.value))>-1?a.checked=!0:a.checked=!1;else"SELECT"===c.tagName&&"multiple"!==c.multiple?c.selectedIndex=t:c.setAttribute("data-value",t)}};oBJECTvIEW.maxCardButtonGroup=7,oBJECTvIEW.prototype.render=function(e){function t(e){var t=null,a=document.createElement("label"),n=o[e];return"O"===n.inputOutputMode?t=document.createElement("output"):((t=document.createElement("input")).type="text",f?t.addEventListener("input",function(){t.setCustomValidity(cLASS.check(e,n,t.value).message)}):t.addEventListener("blur",function(){t.setCustomValidity(cLASS.check(e,n,t.value).message)}),t.addEventListener("change",function(){var a=t.value;f||t.setCustomValidity(cLASS.check(e,n,a).message),t.validity.valid&&(c[n.moName][e]=a)})),s[e]=t,t.name=e,t.value="object"==typeof r[e]?JSON.stringify(r[e]):r[e]||"",t.size=7,o[e].hint&&(a.title=o[e].hint),a.textContent=o[e].label,a.appendChild(t),a}function a(e){var t=null,a=document.createElement("label"),n=o[e];return"O"===o[e].inputOutputMode?t=document.createElement("output"):((t=document.createElement("input")).type="checkbox",t.addEventListener("change",function(){c[n.moName][e]=t.checked})),s[e]=t,t.name=e,t.checked=r[e],a.textContent=o[e].label,o[e].hint&&(a.title=o[e].hint),a.appendChild(t),a}function n(e){var t=0,a="",n=null,u=null,i=[],r=o[e].range;for((u=document.createElement("legend")).textContent=o[e].label,(n=document.createElement("fieldset")).appendChild(u),n.setAttribute("data-bind",e),s[e]=n,o[e].maxCard?(a="checkbox",n.className="checkbox-group"):(a="radio",n.className="radio-button-group"),i=r instanceof eNUMERATION?r.labels:Array.isArray(r)?r:Object.keys(r.instances),t=0;t<i.length;t++)u=dom.createLabeledChoiceControl(a,e,t+1,i[t]),n.appendChild(u),u.firstElementChild.addEventListener("click",function(t){var n=t.target,u=0,i=c[o[e].moName],r=parseInt(n.value);"radio"===a?r!==i[e]?i[e]=r:o[e].optional&&(n.checked=!1,i[e]=void 0):(u=i[e].indexOf(r))>-1?i[e].splice(u,1):i[e].push(r)});return n}function u(e){var t=[],a=document.createElement("select"),n=document.createElement("label"),u=o[e].range;return n.textContent=o[e].label,n.appendChild(a),a.setAttribute("data-bind",e),s[e]=a,o[e].maxCard&&(a.multiple="multiple"),t=u instanceof eNUMERATION?u.labels:Array.isArray(u)?u:Object.keys(u.instances),dom.fillSelectWithOptionsFromArrayList(a,t),a.addEventListener("change",function(){var t=c[o[e].moName];""!==a.value&&(oBJECTvIEW.isIntegerType(u)?(t[e]=parseInt(a.value),u instanceof eNUMERATION&&t[e]++):"Date"===o[e].range?t[e]=new Date(a.value):t[e]=a.value)}),n}var o=this.fields,i=this.fieldOrder,r=this.modelObject,c=this.modelObjects,s={},l=this.userActions,f=!0,d="form",b=null,p=7,m=null,h=null,y=0;for(b=e;b&&"BODY"!==b.tagName;){if("FORM"===b.tagName){d="div";break}b=b.parentElement}if(m=dom.createElement(d,{id:this.modelObject?this.modelObject.objectName:Object.keys(this.modelObjects)[0],classValues:"oBJECTvIEW"}),this.heading&&m.appendChild(dom.createElement("h2",{content:this.heading})),this.domElem=m,e||(e=document.querySelector("#uiContainerEl")),e?e.appendChild(m):(e=document.body,(h=document.querySelector("html>body>footer"))?document.body.insertBefore(m,h):document.body.appendChild(m)),"FORM"===m.tagName){for(y=0;y<m.elements.length;y++)m.elements[y].setCustomValidity("");m.reset()}return function(){function e(e,i){var l=o[i],f=l.range,d=f instanceof eNUMERATION,b=Array.isArray(f);"string"==typeof f&&cLASS[f]&&(f=cLASS[f]),c&&(r=c[l.moName]),d||b?d&&f.MAX<=p||b&&f.length<=p?(e=n(i)).className||(e.className="choice"):(e.className||(e.className="select"),e.appendChild(u(i))):f&&f.constructor===cLASS&&f.isComplexDatatype?l.maxCard&&l.maxCard>1&&(e.className||(e.className="RecordTableWidget"),e.appendChild(oBJECTvIEW.createRecordTableWidget({type:f,records:r[i],tableTitle:l.label}))):"Boolean"===f?(e.className||(e.className="yes-no-field"),e.appendChild(a(i))):(e.className||(e.className="I-O-field"),e.appendChild(t(i))),l.dependsOn&&(r[l.dependsOn]?e.style.display="block":e.style.display="none",s[l.dependsOn].addEventListener("change",function(){e.style.display="none"===e.style.display?"block":"none"}))}i.forEach(function(t){var a=document.createElement("div");Array.isArray(t)?(a.className="field-group",t.forEach(function(t){e(a,t)})):e(a,t),m.appendChild(a)})}(),function(e){var t=dom.createElement("div",{classValues:"action-group"});Object.keys(l).forEach(function(a){("function"!=typeof l[a].showCondition||l[a].showCondition())&&(t.appendChild(dom.createButton({name:a,label:l[a].label||util.capitalizeFirstChar(a),title:l[a].hint,handler:l[a]})),e.appendChild(t))})}(m),s},oBJECTvIEW.createRecordTableWidget=function(e){var t=dom.createElement("table",{classValues:"RecTbl"}),a=null,n=null,u=0,o=null,i=null,r=0,c=[],s=[],l=[],f=[],d=e.maxNmrOfRows||13,b=document.createElement("tBody"),p=null,m=null,h="",y=[],g=null,A=0,C="";if(!e.type)throw Error("No type provided when calling 'createRecordTableWidget'!");if("string"==typeof e.type&&cLASS[e.type])p=cLASS[e.type];else{if(e.type.constructor!==cLASS)throw Error("No cLASS type provided when calling 'createRecordTableWidget'!");p=e.type}m=p.properties,t.appendChild(b),h=e.tableTitle||p.label||p.Name,p.isComplexDatatype?Array.isArray(e.records)?A=(g=e.records||[]).length:"object"==typeof e.records&&(g=e.records||{},A=(y=Object.keys(g)).length):(e.editableProperties&&(s=e.editableProperties),g=e.records||p.instances,A=(y=Object.keys(g)).length),m.id?m.name?l[0]="ID/Name":l[0]="ID":m.name&&(l[0]="Name");for(C in m)"id"!==C&&"name"!==C&&m[C].label&&(s.push(C),l.push(m[C].label),f.push(m[C].range));for(t.setAttribute("data-properties",s.join(" ")),t.appendChild(document.createElement("thead")),(n=(a=t.tHead.insertRow()).insertCell()).textContent=h,n.colSpan=l.length,a=t.tHead.insertRow(),l.forEach(function(e){a.insertCell().textContent=e}),r=Math.min(A,d),u=0;u<r;u++)o=y.length>0?g[y[u]]:g[u],i=b.insertRow(),c[u]=o,o.id?i.insertCell().textContent=o.name?o.id+" / "+o.name:o.id:o.name&&(i.insertCell().textContent=o.name),s.forEach(function(e){var t=null;(t=i.insertCell()).textContent=o.getValueAsString(e),t.setAttribute("data-oldVal",t.textContent),m&&m[e].stringified||(t.setAttribute("contenteditable","true"),t.title="Click to edit!"),t.addEventListener("blur",function(e){var t=e.target,a=t.textContent,n=t.cellIndex-1,u=t.parentElement.rowIndex-2,o=s[n],i=cLASS.check(o,m[o],a);i.message?(alert(i.message),t.textContent=t.getAttribute("data-oldVal")):(a=i.checkedValue,c[u][o]=a,t.setAttribute("data-oldVal",t.textContent))})});return A>d&&(i=b.insertRow(),o.id&&(i.insertCell().textContent="..."),Object.keys(m).forEach(function(e){s.includes(e)&&(i.insertCell().textContent="...")})),t},oBJECTvIEW.createUiElemsForUserActions=function(e){var t=dom.createElement("div",{classValues:"action-group"});return Object.keys(e).forEach(function(a){t.appendChild(dom.createButton({name:a,label:e[a].label||util.capitalizeFirstChar(a),handler:e[a]}))}),t},oBJECTvIEW.createUiFromViewModel=function(e){function t(e){var t=null,a=document.createElement("label"),n=r[e],u=n.range;return"O"===n.inputOutputMode?t=document.createElement("output"):(t=document.createElement("input"),cLASS.isIntegerType(u)||cLASS.isDecimalType(u)?(t.type="number",cLASS.isDecimalType(u)&&(isNaN(parseInt(n.decimalPlaces))?t.step="0.01":t.step="0."+"000000000".substring(0,n.decimalPlaces-1)+"1")):t.type="text",d?t.addEventListener("input",function(){t.setCustomValidity(cLASS.check(e,n,t.value).message)}):t.addEventListener("blur",function(){t.setCustomValidity(cLASS.check(e,n,t.value).message)}),t.addEventListener("change",function(){var a=t.value,u=cLASS.check(e,n,a);d||t.setCustomValidity(u.message),t.validity.valid&&(s[e]=u.checkedValue)})),f[e]=t,t.name=e,"function"==typeof n.fieldValue?t.value=n.fieldValue():"object"==typeof n.fieldValue?t.value=JSON.stringify(n.fieldValue):t.value=n.fieldValue||n.initialValue||"",t.size=7,n.hint&&(a.title=n.hint),a.textContent=n.label,a.appendChild(t),a}function a(e){var t=null,a=document.createElement("label");return"O"===r[e].inputOutputMode?t=document.createElement("output"):((t=document.createElement("input")).type="checkbox",t.addEventListener("change",function(){s[e]=t.checked})),f[e]=t,t.name=e,t.checked=s[e],a.textContent=r[e].label,r[e].hint&&(a.title=r[e].hint),a.appendChild(t),a}function n(e){var t=0,a="",n=null,u=null,o=[],i=r[e].range;for((u=document.createElement("legend")).textContent=r[e].label,(n=document.createElement("fieldset")).appendChild(u),n.setAttribute("data-bind",e),f[e]=n,r[e].maxCard?(a="checkbox",n.className="checkbox-group"):(a="radio",n.className="radio-button-group"),o=i instanceof eNUMERATION?i.labels:Array.isArray(i)?i:Object.keys(i.instances),t=0;t<o.length;t++)u=dom.createLabeledChoiceControl(a,e,t+1,o[t]),n.appendChild(u),u.firstElementChild.addEventListener("click",function(t){var n=t.target,u=0,o=parseInt(n.value);"radio"===a?o!==s[e]?s[e]=o:r[e].optional&&(n.checked=!1,s[e]=void 0):(u=s[e].indexOf(o))>-1?s[e].splice(u,1):s[e].push(o)});return n}function u(e){var t=[],a=document.createElement("select"),n=document.createElement("label"),u=r[e].range;return n.textContent=r[e].label,n.appendChild(a),a.setAttribute("data-bind",e),f[e]=a,r[e].maxCard&&(a.multiple="multiple"),t=u instanceof eNUMERATION?u.labels:Array.isArray(u)?u:Object.keys(u.instances),dom.fillSelectWithOptionsFromArrayList(a,t),a.addEventListener("change",function(){""!==a.value&&(oBJECTvIEW.isIntegerType(u)?(s[e]=parseInt(a.value),u instanceof eNUMERATION&&s[e]++):"Date"===r[e].range?s[e]=new Date(a.value):s[e]=a.value)}),n}var o=e.outputFields||{},i=e.inputFields||{},r={},c=e.fieldOrder||Object.keys(o).concat(Object.keys(i)),s=e.fieldValues,l=e.userActions||{},f={},d=e.validateOnInput||!0,b=(e.fieldGroupSeparator,null);return s||(s=e.fieldValues={}),Object.keys(o).forEach(function(e){o[e].inputOutputMode="O"}),r=util.mergeObjects(o,i),b=dom.createElement("form"),e.formID&&(b.id=e.formID),e.title&&b.appendChild(dom.createElement("h1",{content:e.title})),e.domElem=b,function(){function e(e,o){var i=r[o].range,c=i instanceof eNUMERATION,l=Array.isArray(i);c||l?c&&i.MAX<=oBJECTvIEW.maxCardButtonGroup||l&&i.length<=oBJECTvIEW.maxCardButtonGroup?(e.appendChild(n(o)),e.className||(e.className="choice")):(e.className||(e.className="select"),e.appendChild(u(o))):"Boolean"===i?(e.className||(e.className="yes-no-field"),e.appendChild(a(o))):(e.className||(e.className="I-O-field"),e.appendChild(t(o))),r[o].dependsOn&&(s[r[o].dependsOn]?e.style.display="block":e.style.display="none",f[r[o].dependsOn].addEventListener("change",function(){e.style.display="none"===e.style.display?"block":"none"}))}c.forEach(function(t){var a=document.createElement("div");Array.isArray(t)?(a.className="field-group",t.forEach(function(t){e(a,t)})):e(a,t),b.appendChild(a)})}(),function(e){var t=dom.createElement("div",{classValues:"action-group"});Object.keys(l).forEach(function(a){t.appendChild(dom.createButton({name:a,label:l[a].label||util.capitalizeFirstChar(a),handler:l[a]})),e.appendChild(t)})}(b),e.dataBinding=f,b},function(){function e(e){return Array.prototype.slice.call(e)}function t(e){return new Promise(function(t,a){e.onsuccess=function(){t(e.result)},e.onerror=function(){a(e.error)}})}function a(e,a,n){var u,o=new Promise(function(o,i){t(u=e[a].apply(e,n)).then(o,i)});return o.request=u,o}function n(e,t,n){var u=a(e,t,n);return u.then(function(e){if(e)return new s(e,u.request)})}function u(e,t,a){a.forEach(function(a){Object.defineProperty(e.prototype,a,{get:function(){return this[t][a]},set:function(e){this[t][a]=e}})})}function o(e,t,n,u){u.forEach(function(u){u in n.prototype&&(e.prototype[u]=function(){return a(this[t],u,arguments)})})}function i(e,t,a,n){n.forEach(function(n){n in a.prototype&&(e.prototype[n]=function(){return this[t][n].apply(this[t],arguments)})})}function r(e,t,a,u){u.forEach(function(u){u in a.prototype&&(e.prototype[u]=function(){return n(this[t],u,arguments)})})}function c(e){this._index=e}function s(e,t){this._cursor=e,this._request=t}function l(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,a){e.oncomplete=function(){t()},e.onerror=function(){a(e.error)},e.onabort=function(){a(e.error)}})}function d(e,t,a){this._db=e,this.oldVersion=t,this.transaction=new f(a)}function b(e){this._db=e}u(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),u(s,"_cursor",["direction","key","primaryKey","value"]),o(s,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(s.prototype[e]=function(){var a=this,n=arguments;return Promise.resolve().then(function(){return a._cursor[e].apply(a._cursor,n),t(a._request).then(function(e){if(e)return new s(e,a._request)})})})}),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},u(l,"_store",["name","keyPath","indexNames","autoIncrement"]),o(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),i(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},u(f,"_tx",["objectStoreNames","mode"]),i(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},u(d,"_db",["name","version","objectStoreNames"]),i(d,"_db",IDBDatabase,["deleteObjectStore","close"]),b.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},u(b,"_db",["name","version","objectStoreNames"]),i(b,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[l,c].forEach(function(a){a.prototype[t.replace("open","iterate")]=function(){var a=e(arguments),n=a[a.length-1],u=this._store||this._index,o=u[t].apply(u,a.slice(0,-1));o.onsuccess=function(){n(o.result)}}})}),[c,l].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var a=this,n=[];return new Promise(function(u){a.iterateCursor(e,function(e){e?(n.push(e.value),void 0===t||n.length!=t?e.continue():u(n)):u(n)})})})});var p={open:function(e,t,n){var u=a(indexedDB,"open",[e,t]),o=u.request;return o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))},u.then(function(e){return new b(e)})},delete:function(e){return a(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=p,module.exports.default=module.exports):self.idb=p}(),sTORAGEmANAGER.prototype.createEmptyDb=function(e){var t=this.adapter.name,a=this.adapter.dbName;return new Promise(function(n){var u=[];Array.isArray(e)&&e.length>0?u=e:Object.keys(cLASS).forEach(function(e){"function"==typeof cLASS[e]&&cLASS[e].properties&&(cLASS[e].isAbstract||cLASS[e].isComplexDatatype||u.push(cLASS[e]))}),sTORAGEmANAGER.adapters[t].createEmptyDb(a,u).then(n)})},sTORAGEmANAGER.prototype.add=function(e,t){var a=this.adapter.name,n=this.adapter.dbName,u=this.createLog,o=this.validateBeforeSave,i=[],r=[];if("object"!=typeof t||Array.isArray(t)){if(!Array.isArray(t)||!t.every(function(e){return"object"==typeof e&&!Array.isArray(e)}))throw Error("2nd argument of 'add' must be a record or record list!");i=t}else i=[t];return e.properties.id&&"AutoNumber"===e.properties.id.range&&i.forEach(function(t){t.id||("function"==typeof e.getAutoId?t.id=e.getAutoId():void 0!==e.idCounter&&(t.id=++e.idCounter))}),o&&(i.forEach(function(t){var a=null;if(t instanceof e)r.push(t);else{try{a=new e(t)}catch(e){e instanceof ConstraintViolation?console.log(e.constructor.name+": "+e.message):console.log(e)}a&&r.push(a)}}),i=r),new Promise(function(t){sTORAGEmANAGER.adapters[a].add(n,e,i).then(function(){u&&console.log(i.length+" "+e.Name+"(s) added."),"function"==typeof t&&t()}).catch(function(e){console.log(e.name+": "+e.message)})})},sTORAGEmANAGER.prototype.retrieve=function(e,t){var a=this.adapter.name,n=this.adapter.dbName;return new Promise(function(u){sTORAGEmANAGER.adapters[a].retrieve(n,e,t).then(function(a){a||(a=null,console.log("There is no "+e.Name+" with ID value "+t+" in the database!")),u(a)})})},sTORAGEmANAGER.prototype.retrieveAll=function(e){var t=this.adapter.name,a=this.adapter.dbName;return new Promise(function(n){sTORAGEmANAGER.adapters[t].retrieveAll(a,e).then(function(t){var a=0;if(this.createLog&&console.log(t.length+" "+mcName+" records retrieved."),this.validateAfterRetrieve)for(a=0;a<t.length;a++)try{new e(t[a])}catch(e){e instanceof ConstraintViolation?console.log(e.constructor.name+": "+e.message):console.log(e.name+": "+e.message)}}).then(n)})},sTORAGEmANAGER.prototype.update=function(e,t,a){var n=this.adapter.name,u=this.adapter.dbName,o=this;return new Promise(function(i){var r=null,c=e.properties,s=[],l=!0,f=util.cloneObject(a);o.retrieve(e,t).then(function(o){if(o){if("object"==typeof o&&o.constructor!==e&&!(o=e.createObjectFromRecord(o)))return;r=util.cloneObject(o);try{Object.keys(a).forEach(function(e){var t=o[e],n=a[e],u=c[e];"id"!==e&&(void 0===u.maxCard||1===u.maxCard?(Number.isInteger(t)&&""!==n?n=parseInt(n):"number"==typeof t&&""!==n?n=parseFloat(n):void 0===t&&""===n&&(n=void 0),n!==t?(s.push(e),o.set(e,n)):delete f[e]):t.length!==n.length||t.some(function(e,t){return e!==n[t]})?(o.set(e,n),s.push(e)):delete f[e])})}catch(e){console.log(e.constructor.name+": "+e.message),l=!1,o=r}l&&(s.length>0?sTORAGEmANAGER.adapters[n].update(u,e,t,a,f).then(function(){console.log("Properties "+s.toString()+" of "+e.Name+" "+t+" updated."),"function"==typeof i&&i()}):console.log("No property value changed for "+e.Name+" "+t+"!"))}})})},sTORAGEmANAGER.prototype.destroy=function(e,t){var a=this.adapter.name,n=this.adapter.dbName,u=this;return new Promise(function(o){u.retrieve(e,t).then(function(u){u?sTORAGEmANAGER.adapters[a].destroy(n,e,t).then(function(){console.log(e.Name+" "+t+" deleted."),"function"==typeof o&&o()}):console.log("There is no "+e.Name+" with ID value "+t+" in the database!")})})},sTORAGEmANAGER.prototype.clearTable=function(e){var t=this.adapter.name,a=this.adapter.dbName;return new Promise(function(n){sTORAGEmANAGER.adapters[t].clearTable(a,e).then(n)})},sTORAGEmANAGER.prototype.clearDB=function(){var e=this.adapter.name,t=this.adapter.dbName;return new Promise(function(a){("function"==typeof confirm&&confirm("Do you really want to delete all data?")||"function"!=typeof confirm)&&sTORAGEmANAGER.adapters[e].clearDB(t).then(a)})},sTORAGEmANAGER.prototype.saveOnUnload=function(){var e=this.adapter.name,t=this.adapter.dbName;sTORAGEmANAGER.adapters[e].saveOnUnload(t)},sTORAGEmANAGER.adapters={},sTORAGEmANAGER.adapters.LocalStorage={createEmptyDb:function(e,t){return new Promise(function(e){e()})},add:function(e,t,a){return new Promise(function(e){var n=null;Array.isArray(a)||(a=[a]),a.forEach(function(e){n=new t(e),t.instances[n.id]=n}),e(n)})},retrieve:function(e,t,a){return new Promise(function(e){e(t.instances[a])})},retrieveLsTable:function(e){var t="",a=[],n=0,u="",o={},i=util.class2TableName(e.Name);try{localStorage[i]&&(u=localStorage[i])}catch(e){console.log("Error when reading from Local Storage\n"+e)}if(u)for(o=JSON.parse(u),a=Object.keys(o),console.log(a.length+" "+e.Name+" records loaded."),n=0;n<a.length;n++)t=a[n],e.instances[t]=e.createObjectFromRecord(o[t])},retrieveAll:function(e,t){return new Promise(function(e){e(Object.keys(t.instances).map(function(e){return t.instances[e]}))})},update:function(e,t,a,n){return new Promise(function(e){e()})},destroy:function(e,t,a){return new Promise(function(e){delete t.instances[a],e()})},clearTable:function(e,t){return new Promise(function(e){var a=t.tableName||util.class2TableName(t.Name);t.instances={};try{localStorage[a]=JSON.stringify({}),console.log("Table "+a+" cleared.")}catch(e){console.log("Error when writing to Local Storage\n"+e)}e()})},clearDB:function(){return new Promise(function(e){Object.keys(cLASS).forEach(function(e){var t="";if(!cLASS[e].isComplexDatatype&&Object.keys(cLASS[e].instances).length>0){cLASS[e].instances={},t=mc.tableName||util.class2TableName(cLASS[e].Name);try{localStorage[t]=JSON.stringify({})}catch(e){console.log("Error when writing to Local Storage\n"+e)}}}),e()})},saveOnUnload:function(){Object.keys(cLASS).forEach(function(e){var t="",a={},n=null,u=0,o=null,i=[],r="";if(cLASS[e].instances){for(o=cLASS[e],i=Object.keys(o.instances),r=util.class2TableName(o.Name),u=0;u<i.length;u++)t=i[u],n=o.instances[t],a[t]=n.toRecord();try{localStorage[r]=JSON.stringify(a),console.log(i.length+" "+o.Name+" records saved.")}catch(e){console.log("Error when writing to Local Storage\n"+e)}}})}},sTORAGEmANAGER.adapters.IndexedDB={createEmptyDb:function(e,t){return new Promise(function(a){idb.open(e,1,function(e){t.forEach(function(t){var a=t.tableName||util.class2TableName(t.Name),n=t.primaryKey||"id";e.objectStoreNames.contains(a)||e.createObjectStore(a,{keyPath:n})})}).then(a)})},add:function(e,t,a){return new Promise(function(n){var u=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(u,"readwrite"),n=t.objectStore(u);return Promise.all(a.map(function(e){return n.add(e)})).then(function(){return t.complete})}).then(n).catch(function(e){console.log(e.name+": "+e.message)})})},retrieve:function(e,t,a){return new Promise(function(n){var u=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){return e.transaction(u,"readonly").objectStore(u).get(a)}).then(function(e){void 0===e&&(e=null),n(e)}).catch(function(e){console.log(e.name+": "+e.message)})})},retrieveAll:function(e,t){return new Promise(function(a){var n=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){return e.transaction(n,"readonly").objectStore(n).getAll()}).then(function(e){void 0===e&&(e=[]),a(e)}).catch(function(e){console.log(e.name+": "+e.message)})})},update:function(e,t,a,n){return new Promise(function(u){var o=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(o,"readwrite"),u=t.objectStore(o);return n.id=a,u.put(n),t.complete}).then(u).catch(function(e){console.log(e.name+": "+e.message)})})},destroy:function(e,t,a){return new Promise(function(n){var u=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(u,"readwrite");return t.objectStore(u).delete(a),t.complete}).then(n).catch(function(e){console.log(e.name+": "+e.message)})})},clearTable:function(e,t){return new Promise(function(a){var n=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(n,"readwrite");return t.objectStore(n).clear(),t.complete}).then(a).catch(function(e){console.log(e.name+": "+e.message)})})},clearDB:function(e){return new Promise(function(t){idb.open(e).then(function(e){var t=e.transaction(e.objectStoreNames,"readwrite");return Promise.all(Array.from(e.objectStoreNames,function(e){return t.objectStore(e).clear()})).then(function(){return t.complete})}).then(t).catch(function(e){console.log(e.name+": "+e.message)})})},saveOnUnload:function(e){}};