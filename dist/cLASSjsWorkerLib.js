"use strict";function ConstraintViolation(e,t){this.message=e,t&&(this.culprit=t)}function NoConstraintViolation(e){void 0!==e&&(this.checkedValue=e),this.message=""}function MandatoryValueConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function RangeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function StringLengthConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function IntervalConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function PatternConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function UniquenessConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function CardinalityConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ReferentialIntegrityConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function FrozenValueConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function OtherConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function EntityTypeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ModelClassConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ViewConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function ObjectTypeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function AgentTypeConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function KindConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function RoleConstraintViolation(e,t){ConstraintViolation.call(this,e,t)}function eNUMERATION(e,t){var u=0;if("string"!=typeof e)throw new Error("The first constructor argument of an enumeration must be a string!");if(this.name=e,Array.isArray(t)){if(!t.every(function(e){return"string"==typeof e}))throw new Error("A list of enumeration labels as the second constructor argument must be an array of strings!");this.labels=t,this.enumLitNames=this.labels,this.codeList=null}else{if(!("object"==typeof t&&Object.keys(t).length>0))throw new Error("Invalid Enumeration constructor argument: "+t);if(!Object.keys(t).every(function(e){return"string"==typeof t[e]}))throw new Error("All values of a code list map must be strings!");this.codeList=t,this.enumLitNames=Object.keys(this.codeList),this.labels=this.enumLitNames.map(function(e){return t[e]+" ("+e+")"})}for(this.MAX=this.enumLitNames.length,u=1;u<=this.enumLitNames.length;u++)this[this.enumLitNames[u-1].replace(/( |-)/g,"_").split("_").map(function(e){return e.toUpperCase()}).join("_")]=u;Object.freeze(this),eNUMERATION.instances[this.name]=this}function cLASS(e){var t=e.properties||{},u=e.methods||{},a=e.supertypeName,n=null,o=null,r=[];if(a&&!cLASS[a])throw"Specified supertype "+a+" has not been defined!";if(!Object.keys(t).every(function(e){return void 0!==t[e].range}))throw"No range defined for some property of class "+e.Name+" !";return o=function(u){a&&cLASS[a].call(this,u),Object.keys(t).forEach(function(e){var a,n=t[e].range,o=null,i=[],c=0,s=null;if("object"==typeof u&&u[e]){if(a=u[e],!((s=cLASS.check(e,t[e],a))instanceof NoConstraintViolation))throw s;if("string"==typeof n&&"object"!=typeof a&&(cLASS[n]||n.includes("|")))if(n.includes("|")){for(i=n.split("|"),c=0;c<i.length;c++)if((o=cLASS[i[c]])&&o.instances[String(a)]){this[e]=o.instances[String(a)];break}this[e]||(this[e]=a)}else this[e]=cLASS[n].instances[String(a)]||a;else this[e]=a}else void 0!==t[e].initialValue?"function"==typeof t[e].initialValue?r.push(e):this[e]=t[e].initialValue:"id"===e&&"AutoNumber"===n?"function"==typeof this.constructor.getAutoId?this[e]=this.constructor.getAutoId():void 0!==this.constructor.idCounter&&(this[e]=++this.constructor.idCounter):t[e].optional||(cLASS.isIntegerType(n)||cLASS.isDecimalType(n)?this[e]=0:"String"===n?this[e]="":"Boolean"===n?this[e]=!1:"object"==typeof n&&(["Array","ArrayList"].includes(n.dataType)?this[e]=[]:"Map"===n.dataType&&(this[e]={})));t[e].historySize&&(this.history=this.history||{},this.history[e]=t[e].decimalPlaces?new cLASS.RingBuffer(t[e].range,t[e].historySize,{decimalPlaces:t[e].decimalPlaces}):new cLASS.RingBuffer(t[e].range,t[e].historySize))},this),r.forEach(function(e){this[e]=t[e].initialValue.call(this)},this),"object"==typeof u&&Object.keys(u).forEach(function(e){t[e]||(this[e]=u[e])},this),!e.isComplexDatatype&&!e.isAbstract&&"id"in this&&(cLASS[e.Name].instances[String(this.id)]=this)},o.constructor=cLASS,o.Name=e.Name,e.isComplexDatatype&&(o.isComplexDatatype=!0),e.isAbstract&&(o.isAbstract=!0),e.shortLabel&&(o.shortLabel=e.shortLabel),e.primaryKey&&(o.primaryKey=e.primaryKey),e.tableName&&(o.tableName=e.tableName),a?(o.supertypeName=a,n=cLASS[a],(o.prototype=Object.create(n.prototype)).constructor=o,o.properties=Object.create(n.properties),Object.keys(t).forEach(function(e){o.properties[e]=t[e]})):(o.properties=t,o.prototype.set=function(e,t){var u=cLASS.check(e,this.constructor.properties[e],t);if(!(u instanceof NoConstraintViolation))throw u;this[e]=u.checkedValue},o.prototype.toString=function(){var e="",t="",u=0;return this.name?e=this.name:(e=this.constructor.shortLabel||this.constructor.Name,this.id&&(e+=":"+this.id)),t="{ ",Object.keys(this).forEach(function(e){var a=cLASS[this.constructor.Name].properties[e],n=a?a.shortLabel||a.label:e,o="";o=a&&"string"==typeof a.range&&cLASS[a.range]?a.maxCard&&a.maxCard>1?Array.isArray(this[e])?this[e].map(function(e){return e.id}).toString():JSON.stringify(Object.keys(this[e])):String(this[e].id):"function"==typeof this[e]?"a function":JSON.stringify(this[e]),void 0!==this[e]&&n&&(t+=(u>0?", ":"")+n+": "+o,u+=1)},this),"{ }"===(t+="}")&&(t=""),e+t},o.prototype.toRecord=function(){var e,t,u=this,a={},n={},o=[];return Object.keys(u).forEach(function(r){void 0!==u[r]&&(t=u[r],n=u.constructor.properties[r],e=n.range,n.maxCard&&n.maxCard>1?e.constructor&&e.constructor===cLASS?o=Array.isArray(t)?t.slice(0):Object.values(t):Array.isArray(t)?o=t.slice(0):console.log("Invalid non-array collection in toRecord!"):o=[t],o.forEach(function(t,u){["number","string","boolean"].includes(typeof t)||!t?o[u]=String(t):"Date"===e?o[u]=util.createIsoDateString(t):e.constructor&&e.constructor===cLASS?o[u]=t.id:Array.isArray(t)?o[u]=t.slice(0):o[u]=JSON.stringify(t)}),!n.maxCard||n.maxCard<=1?a[r]=o[0]:a[r]=o)}),a},o.prototype.getValueAsString=function(e){var t=void 0===t?void 0:t,u=this.constructor.properties[e],a=u.range,n=this[e],o=[],r="",i=0;if(void 0===n||null===n)return"";if(u.maxCard&&u.maxCard>1?Array.isArray(n)?o=n.slice(0):console.log("The value of a multi-valued datatype property like "+e+"must be an array!"):o=[n],o.forEach(function(n,r){"function"==typeof u.val2str?o[r]=u.val2str(n):t&&a instanceof t?o[r]=a.labels[n-1]:["number","string","boolean"].includes(typeof n)||!n?o[r]=String(n):"Date"===a?o[r]=util.createIsoDateString(n):Array.isArray(n)?o[r]=n.slice(0):"string"==typeof a&&cLASS[a]?"object"==typeof n&&void 0!==n.id?o[r]=n.id:(o[r]=n.toString(),u.stringified=!0,console.log("Property "+this.constructor.Name+"::"+e+" has a cLASS object value without an 'id' slot!")):(o[r]=JSON.stringify(n),u.stringified=!0)},this),r=o[0],u.maxCard&&u.maxCard>1){for(r="["+r,i=1;i<o.length;i++)r+=", "+o[i];r+="]"}return r},o.createObjectFromRecord=function(e){var t={};try{t=new o(e)}catch(e){console.log(e.constructor.name+" while deserializing a "+o.Name+" record: "+e.message),t=null}return t}),Object.keys(u).forEach(function(e){o.prototype[e]=u[e]}),cLASS[e.Name]=o,e.isAbstract||(cLASS[e.Name].instances={}),o}function sTORAGEmANAGER(e){if("object"!=typeof e||"string"!=typeof e.name||!["LocalStorage","IndexedDB","MariaDB"].includes(e.name))throw new ConstraintViolation("Invalid storage adapter name!");if(!e.dbName)throw new ConstraintViolation("Storage adapter: missing DB name!");this.adapter=e,"LocalStorage"===e.name&&Object.keys(cLASS).forEach(function(e){cLASS[e].instances&&sTORAGEmANAGER.adapters.LocalStorage.retrieveLsTable(cLASS[e])}),sTORAGEmANAGER.adapters[this.adapter.name].currentAdapter=e}Array.max=function(e){return Math.max.apply(Math,e)},Array.min=function(e){return Math.min.apply(Math,e)},Array.prototype.clone=function(){return this.slice(0)},Array.prototype.merge=function(e){return Array.prototype.push.apply(this,e)},Array.prototype.isEqualTo=function(e){return this.length===e.length&&this.every(function(t,u){return t===e[u]})},NoConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),NoConstraintViolation.prototype.constructor=NoConstraintViolation,MandatoryValueConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),MandatoryValueConstraintViolation.prototype.constructor=MandatoryValueConstraintViolation,RangeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),RangeConstraintViolation.prototype.constructor=RangeConstraintViolation,StringLengthConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),StringLengthConstraintViolation.prototype.constructor=StringLengthConstraintViolation,IntervalConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),IntervalConstraintViolation.prototype.constructor=IntervalConstraintViolation,PatternConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),PatternConstraintViolation.prototype.constructor=PatternConstraintViolation,UniquenessConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),UniquenessConstraintViolation.prototype.constructor=UniquenessConstraintViolation,CardinalityConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),CardinalityConstraintViolation.prototype.constructor=CardinalityConstraintViolation,ReferentialIntegrityConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ReferentialIntegrityConstraintViolation.prototype.constructor=ReferentialIntegrityConstraintViolation,FrozenValueConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),FrozenValueConstraintViolation.prototype.constructor=FrozenValueConstraintViolation,OtherConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),OtherConstraintViolation.prototype.constructor=OtherConstraintViolation,EntityTypeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),EntityTypeConstraintViolation.prototype.constructor=EntityTypeConstraintViolation,ModelClassConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ModelClassConstraintViolation.prototype.constructor=ModelClassConstraintViolation,ViewConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ViewConstraintViolation.prototype.constructor=ViewConstraintViolation,ObjectTypeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),ObjectTypeConstraintViolation.prototype.constructor=ObjectTypeConstraintViolation,AgentTypeConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),AgentTypeConstraintViolation.prototype.constructor=AgentTypeConstraintViolation,KindConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),KindConstraintViolation.prototype.constructor=KindConstraintViolation,RoleConstraintViolation.prototype=Object.create(ConstraintViolation.prototype),RoleConstraintViolation.prototype.constructor=RoleConstraintViolation;var util={};util.createIsoDateString=function(e){return e.toISOString().substring(0,10)},util.nextYear=function(){return(new Date).getFullYear()+1},util.capitalizeFirstChar=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},util.mergeObjects=function(){var e,t=0,u=0,a=arguments.length,n=0,o=!1,r=!1,i=null,c=[],s="";for(t=0;t<a;t++)if(void 0!==(i=arguments[t]))if(Array.isArray(i)){if(r)throw"util.mergeObjects: incompatible objects were found! Trying to merge an Array with an Object! Expected Array arguments only!";o=!0,e=(e=e||[]).concat(i)}else{if("object"!=typeof i)throw"util.mergeObjects: only arguments of type Array or Object are allowed, but '"+typeof arguments[t]+"' type was found for argument number "+t;if(o)throw"util.mergeObjects: incompatible objects were found! Trying to merge an Object with an Array! Expected Object arguments only!";for(e=e||{},r=!0,n=(c=Object.keys(i)).length,u=0;u<n;u++)e[s=c[u]]=i[s]}return e},util.class2TableName=function(e){return e.charAt(0)===e.charAt(0).toUpperCase()?"y"===e.charAt(e.length-1)?util.camelToLowerCase(e.slice(0,e.length-1))+"ies":util.camelToLowerCase(e)+"s":"Y"===e.charAt(e.length-1)?util.invCamelToUppercase(e.slice(0,e.length-1))+"IES":util.invCamelToUppercase(e)+"S"},util.table2ClassName=function(e){var t=util.lowercaseToCamel(e);return"s"===(t=t.charAt(0).toUpperCase()+t.slice(1)).charAt(t.length-1)&&(t=t.slice(0,t.length-1)),t},util.property2ColumnName=function(e){return util.camelToLowerCase(e)},util.column2PropertyName=function(e){return util.lowercaseToCamel(e)},util.camelToLowerCase=function(e){return e=e.charAt(0).toLowerCase()+e.slice(1),e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},util.invCamelToUppercase=function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([a-z])/g,function(e){return"_"+e.toUpperCase()})},util.lowercaseToCamel=function(e){return e.replace(/(\_[a-z])/g,function(e){return e.toUpperCase().replace("_","")})},util.JsIdentifierPattern=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/,util.isIntegerString=function(e){return"string"==typeof e&&0==e.search(/^-?[0-9]+$/)},util.createRecordFromObject=function(e){var t,u={},a="";for(a in e)t=e[a],e.hasOwnProperty(a)&&("string"==typeof t||"number"==typeof t||"boolean"==typeof t||t instanceof Date||Array.isArray(t)&&!t.some(function(e){return"object"==typeof e}))&&(t instanceof Date?u[a]=t.toISOString():Array.isArray(t)?u[a]=t.slice(0):u[a]=t);return u},util.cloneRecord=util.createRecordFromObject,util.cloneObject=function(e){var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(u){t[u]="object"==typeof e[u]?util.cloneObject(e[u]):e[u]}),t},util.mergeObjects=function(){var e=0,t=0,u=null,a={},n=[],o="";for(e=0;e<arguments.length;e++)if((u=arguments[e])&&"object"==typeof u)for(n=Object.keys(u),t=0;t<n.length;t++)a[o=n[t]]=u[o];return a},util.swapArrayElements=function(e,t,u){var a="object"==typeof e[t]?Object.assign({},e[t]):e[t];e[t]="object"==typeof e[u]?Object.assign({},e[u]):e[u],e[u]=a},util.shuffleArray=function(e){var t,u,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),u=e[a],e[a]=e[t],e[t]=u},util.cartesianProduct=function(e){return e.reduce(function(e,t){return e.map(function(e){return t.map(function(t){return e.concat(t)})}).reduce(function(e,t){return e.concat(t)},[])},[[]])},eNUMERATION.prototype.isValidEnumLitOrIndex=function(e){return Number.isInteger(e)&&e>0&&e<this.MAX},eNUMERATION.prototype.enumIndexesToNames=function(e){if(!Array.isArray(e))throw new Error("The argument must be an Array!");return e.map(function(e){return this.enumLitNames[e-1]},this).join(", ")},eNUMERATION.instances={},cLASS.isIntegerType=function(e){return["Integer","PositiveInteger","AutoNumber","NonNegativeInteger"].includes(e)||e instanceof eNUMERATION},cLASS.isDecimalType=function(e){return["Number","Decimal","Percent","ClosedUnitInterval","OpenUnitInterval"].includes(e)},cLASS.patterns={ID:/^([a-zA-Z0-9][a-zA-Z0-9_\-]+[a-zA-Z0-9])$/,EMAIL:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,URL:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,INT_PHONE_NO:/^\+(?:[0-9] ?){6,14}[0-9]$/},cLASS.check=function(e,t,u,a){var n=null,o=[],r=t.patternMessage||"",i=t.minCard||0,c=t.maxCard||1,s=t.min||0,f=t.max,l=t.range,d=t.pattern;if(void 0===u||""===u)return t.optional?new NoConstraintViolation:new MandatoryValueConstraintViolation("A value for "+e+" is required!");if(1===c)o=[u];else if(Array.isArray(u))o=u;else{if("string"!=typeof l||!cLASS[l])return new RangeConstraintViolation("Values for "+e+" must be arrays or maps of IDs to cLASS instances!");if(t.ordered)return new RangeConstraintViolation("Values for the ordered property "+e+" must be arrays, and not maps!");o=Object.keys(u).map(function(e){return u[e]})}switch(cLASS.isIntegerType(l)&&o.forEach(function(e,t){"string"==typeof e&&(o[t]=parseInt(e))}),cLASS.isDecimalType(l)&&o.forEach(function(e,t){"string"==typeof e&&(o[t]=parseFloat(e))}),l){case"String":o.forEach(function(t){"string"!=typeof t&&(n=new RangeConstraintViolation("Values for "+e+" must be strings!"))});break;case"NonEmptyString":o.forEach(function(t){"string"==typeof t&&""!==t.trim()||(n=new RangeConstraintViolation("Values for "+e+" must be non-empty strings!"))});break;case"Identifier":o.forEach(function(t){"string"==typeof t&&""!==t.trim()&&cLASS.patterns.ID.test(t)||(n=new RangeConstraintViolation("Values for "+e+" must be valid identifiers/names!"))});break;case"Email":o.forEach(function(t){"string"==typeof t&&cLASS.patterns.EMAIL.test(t)||(n=new RangeConstraintViolation("Values for "+e+" must be valid email addresses!"))});break;case"URL":o.forEach(function(t){"string"==typeof t&&cLASS.patterns.URL.test(t)||(n=new RangeConstraintViolation("Values for "+e+" must be valid URLs!"))});break;case"PhoneNumber":o.forEach(function(t){"string"==typeof t&&cLASS.patterns.INT_PHONE_NO.test(t)||(n=new RangeConstraintViolation("Values for "+e+" must be valid international phone numbers!"))});break;case"Integer":o.forEach(function(t){Number.isInteger(t)||(n=new RangeConstraintViolation("The value of "+e+" must be an integer!"))});break;case"NonNegativeInteger":o.forEach(function(t){(!Number.isInteger(t)||t<0)&&(n=new RangeConstraintViolation("The value of "+e+" must be a non-negative integer!"))});break;case"AutoNumber":1===o.length?(!Number.isInteger(o[0])||o[0]<1)&&(n=new RangeConstraintViolation("The value of "+e+" must be a positive integer!")):n=new RangeConstraintViolation("The value of "+e+" must not be a collection like "+o);break;case"PositiveInteger":o.forEach(function(t){(!Number.isInteger(t)||t<1)&&(n=new RangeConstraintViolation("The value of "+e+" must be a positive integer!"))});break;case"Number":case"Decimal":case"Percent":o.forEach(function(t){"number"!=typeof t&&(n=new RangeConstraintViolation("The value of "+e+" must be a (decimal) number!"))});break;case"ClosedUnitInterval":o.forEach(function(t){"number"!=typeof t?n=new RangeConstraintViolation("The value of "+e+" must be a (decimal) number!"):(t<0||t>1)&&(n=new RangeConstraintViolation("The value of "+e+" must be a number in [0,1]!"))});break;case"OpenUnitInterval":o.forEach(function(t){"number"!=typeof t?n=new RangeConstraintViolation("The value of "+e+" must be a (decimal) number!"):(t<=0||t>=1)&&(n=new RangeConstraintViolation("The value of "+e+" must be a number in (0,1)!"))});break;case"Boolean":o.forEach(function(t,u){"string"==typeof t?["true","yes"].includes(t)?o[u]=!0:["no","false"].includes(t)?o[u]=!1:n=new RangeConstraintViolation("The value of "+e+" must be either 'true'/'yes' or 'false'/'no'!"):"boolean"!=typeof t&&(n=new RangeConstraintViolation("The value of "+e+" must be either 'true' or 'false'!"))});break;case"Date":o.forEach(function(t,u){"string"==typeof t&&/\d{4}-(0\d|1[0-2])-([0-2]\d|3[0-1])/.test(t)&&!isNaN(Date.parse(t))?o[u]=new Date(t):t instanceof Date||(n=new RangeConstraintViolation("The value of "+e+" must be either a Date value or an ISO date string. "+t+" is not admissible!"))});break;case"DateTime":o.forEach(function(t,u){"string"!=typeof t||isNaN(Date.parse(t))?t instanceof Date||(n=new RangeConstraintViolation("The value of "+e+" must be either a Date value or an ISO date-time string. "+t+" is not admissible!")):o[u]=new Date(t)});break;default:l instanceof eNUMERATION||"string"==typeof l&&eNUMERATION[l]?("string"==typeof l&&(l=eNUMERATION[l]),o.forEach(function(t){(!Number.isInteger(t)||t<1||t>l.MAX)&&(n=new RangeConstraintViolation("The value "+t+" is not an admissible enumeration integer for "+e))})):Array.isArray(l)?o.forEach(function(t){-1===l.indexOf(t)&&(n=new RangeConstraintViolation("The "+e+" value "+t+" is not in value list "+l.toString()))}):"string"==typeof l&&cLASS[l]?o.forEach(function(t,u){var r=[],i={};cLASS[l].isComplexDatatype||t instanceof cLASS[l]?cLASS[l].isComplexDatatype&&"object"==typeof t&&(r=Object.keys(t),i=cLASS[l].properties,Object.keys(i).every(function(e){return!!i[e].optional||e in t})&&r.every(function(e){return!!i[e]})?r.forEach(function(e){var u=cLASS.check(e,i[e],t[e]);if(!(u instanceof NoConstraintViolation))throw u;t[e]=u.checkedValue}):n=new RangeConstraintViolation("The value of "+e+" must be an instance of "+l+" or a compatible record!"+JSON.stringify(t)+" is not admissible!")):cLASS[l].instances[String(t)]?t=o[u]=cLASS[l].instances[String(t)]:a&&a.checkRefInt&&(n=new ReferentialIntegrityConstraintViolation("The value "+t+" of property '"+e+"' is not an ID of any "+l+" object!"))}):"string"==typeof l&&l.includes("|")?o.forEach(function(t,u){var r=[];r=l.split("|"),"object"==typeof t?r.some(function(e){return t instanceof cLASS[e]})?t=o[u]=t.id:n=ReferentialIntegrityConstraintViolation("The object "+JSON.stringify(t)+" is not an instance of any class from "+l+"!"):Number.isInteger(t)?a&&a.checkRefInt&&(cLASS[l].instances[String(t)]||(n=new ReferentialIntegrityConstraintViolation("The value "+t+" of property '"+e+"' is not an ID of any "+l+" object!"))):"string"==typeof t?isNaN(parseInt(t))||(t=o[u]=parseInt(t)):n=new RangeConstraintViolation("The value ("+t+") of property '"+e+"' is neither an integer nor a string!")}):"object"==typeof l&&void 0!==l.dataType?o.forEach(function(t){var u=0;switch("object"!=typeof t&&(n=new RangeConstraintViolation("The value of "+e+" must be an object! "+JSON.stringify(t)+" is not admissible!")),l.dataType){case"Array":if(!Array.isArray(t)){n=new RangeConstraintViolation("The value of "+e+" must be an array! "+JSON.stringify(t)+" is not admissible!");break}if(t.length!==l.size){n=new RangeConstraintViolation("The value of "+e+" must be an array of length "+l.size+"! "+JSON.stringify(t)+" is not admissible!");break}for(u=0;u<t.length;u++)cLASS.isOfType(t[u],l.itemType)||(n=new RangeConstraintViolation("The items of "+e+" must be of type "+l.itemType+"! "+JSON.stringify(t)+" is not admissible!"));break;case"ArrayList":if(!Array.isArray(t)){n=new RangeConstraintViolation("The value of "+e+" must be an array! "+JSON.stringify(t)+" is not admissible!");break}for(u=0;u<t.length;u++)cLASS.isOfType(t[u],l.itemType)||(n=new RangeConstraintViolation("The items of "+e+" must be of type "+l.itemType+"! "+JSON.stringify(t)+" is not admissible!"))}}):l===Object&&o.forEach(function(t){t instanceof Object||(n=new RangeConstraintViolation("The value of "+e+" must be a JS object! "+JSON.stringify(t)+" is not admissible!"))})}if(n)return n;if("String"!==l&&"NonEmptyString"!==l||o.forEach(function(t){void 0!==s&&t.length<s?n=new StringLengthConstraintViolation("The length of "+e+" must not be smaller than "+s):void 0!==f&&t.length>f?n=new StringLengthConstraintViolation("The length of "+e+" must not be greater than "+f):void 0===d||d.test(t)||(n=new PatternConstraintViolation(r||t+"does not comply with the pattern defined for "+e))}),"Integer"!==l&&"NonNegativeInteger"!==l&&"PositiveInteger"!==l||o.forEach(function(t){void 0!==s&&t<s?n=new IntervalConstraintViolation(e+" must be greater than "+s):void 0!==f&&t>f&&(n=new IntervalConstraintViolation(e+" must be smaller than "+f))}),n)return n;if(c>1){if(i>0&&o.length<i)return new CardinalityConstraintViolation("A collection of at least "+i+" values is required for "+e);if(o.length>c)return new CardinalityConstraintViolation("A collection value for "+e+" must not have more than "+c+" members!")}return new NoConstraintViolation(1===c?o[0]:o)},cLASS.range2JsDataType=function(e){var t="";switch(e){case"String":case"NonEmptyString":case"Email":case"URL":case"PhoneNumber":case"Date":t="string";break;case"Integer":case"NonNegativeInteger":case"PositiveInteger":case"Number":case"AutoNumber":case"Decimal":case"Percent":case"ClosedUnitInterval":case"OpenUnitInterval":t="number";break;case"Boolean":t="boolean";break;default:e instanceof eNUMERATION?t="number":"string"==typeof e&&cLASS[e]?t="string":"object"==typeof e&&(t="object")}return t},cLASS.isOfType=function(e,t){switch(t){case"String":return"string"==typeof e;case"NonEmptyString":return"string"==typeof e&&""!==e.trim();case"Integer":return Number.isInteger(e);case"NonNegativeInteger":return Number.isInteger(e)&&e>=0;case"PositiveInteger":return Number.isInteger(e)&&e>0;case"Decimal":return"number"==typeof e;case"ClosedUnitInterval":return"number"==typeof e&&e>=0&&e<=1;case"OpenUnitInterval":return"number"==typeof e&&e>0&&e<1;default:return!0}},cLASS.cOLLECTIONdATATYPE=function(e,t,u,a){this.type=e,this.itemType=t,this.size=u,this.optParams=a},cLASS.Array=function(e,t,u){if(!(this instanceof cLASS.Array))return new cLASS.cOLLECTIONdATATYPE("Array",{itemType:e,size:t,optParams:u});this.type="Array",this.itemType=e,this.size=t,u&&(u.constraints&&(this.constraints=u.constraints),u.decimalPlaces&&(this.decimalPlaces=u.decimalPlaces)),this.array=new Array(t)},cLASS.ArrayList=function(e,t){return t?{dataType:"ArrayList",itemType:e,constraints:t}:{dataType:"ArrayList",itemType:e}},cLASS.Map=function(e,t){return t?{dataType:"Map",itemType:e,constraints:t}:{dataType:"Map",itemType:e}},cLASS.RingBuffer=function(e,t,u){if(!(this instanceof cLASS.RingBuffer))return new cLASS.cOLLECTIONdATATYPE("RingBuffer",{itemType:e,size:t,optParams:u});this.type="RingBuffer",this.itemType=e,this.size=t,u&&(u.constraints&&(this.constraints=u.constraints),u.decimalPlaces&&(this.decimalPlaces=u.decimalPlaces)),this.first=0,this.last=-1,this.buffer=new Array(t)},cLASS.RingBuffer.prototype.nmrOfItems=function(){return-1===this.last?0:this.first<=this.last?this.last-this.first+1:this.last+this.size-this.first+1},cLASS.RingBuffer.prototype.add=function(e){this.nmrOfItems()<this.size?this.last++:(this.first=(this.first+1)%this.size,this.last=(this.last+1)%this.size),this.buffer[this.last]=e},cLASS.RingBuffer.prototype.toString=function(e){var t,u=0,a="[",n=1,o=this.nmrOfItems(),r=e?Math.min(e,o):o;if(0===o)return" ";for(u=0;u<r;u++)t=this.buffer[(this.first+u)%this.size],this.itemType instanceof eNUMERATION?t=this.itemType.labels[t-1]:cLASS.isDecimalType(this.itemType)&&(n=Math.pow(10,this.decimalPlaces),t=Math.round(t*n)/n),a+=t,u<r-1&&(a+=", ");return a+"]"},cLASS.RingBuffer.prototype.getSMA=function(e){var t=this.nmrOfItems(),u=0,a=0;for(e&&(t=Math.min(e,t)),u=0;u<t;u++)a+=this.buffer[(this.first+u)%this.size];return a/t},function(){function e(e){return Array.prototype.slice.call(e)}function t(e){return new Promise(function(t,u){e.onsuccess=function(){t(e.result)},e.onerror=function(){u(e.error)}})}function u(e,u,a){var n,o=new Promise(function(o,r){t(n=e[u].apply(e,a)).then(o,r)});return o.request=n,o}function a(e,t,a){var n=u(e,t,a);return n.then(function(e){if(e)return new s(e,n.request)})}function n(e,t,u){u.forEach(function(u){Object.defineProperty(e.prototype,u,{get:function(){return this[t][u]},set:function(e){this[t][u]=e}})})}function o(e,t,a,n){n.forEach(function(n){n in a.prototype&&(e.prototype[n]=function(){return u(this[t],n,arguments)})})}function r(e,t,u,a){a.forEach(function(a){a in u.prototype&&(e.prototype[a]=function(){return this[t][a].apply(this[t],arguments)})})}function i(e,t,u,n){n.forEach(function(n){n in u.prototype&&(e.prototype[n]=function(){return a(this[t],n,arguments)})})}function c(e){this._index=e}function s(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function l(e){this._tx=e,this.complete=new Promise(function(t,u){e.oncomplete=function(){t()},e.onerror=function(){u(e.error)},e.onabort=function(){u(e.error)}})}function d(e,t,u){this._db=e,this.oldVersion=t,this.transaction=new l(u)}function b(e){this._db=e}n(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),i(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(s,"_cursor",["direction","key","primaryKey","value"]),o(s,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(s.prototype[e]=function(){var u=this,a=arguments;return Promise.resolve().then(function(){return u._cursor[e].apply(u._cursor,a),t(u._request).then(function(e){if(e)return new s(e,u._request)})})})}),f.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},n(f,"_store",["name","keyPath","indexNames","autoIncrement"]),o(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),i(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),r(f,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},n(l,"_tx",["objectStoreNames","mode"]),r(l,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},n(d,"_db",["name","version","objectStoreNames"]),r(d,"_db",IDBDatabase,["deleteObjectStore","close"]),b.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},n(b,"_db",["name","version","objectStoreNames"]),r(b,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[f,c].forEach(function(u){u.prototype[t.replace("open","iterate")]=function(){var u=e(arguments),a=u[u.length-1],n=this._store||this._index,o=n[t].apply(n,u.slice(0,-1));o.onsuccess=function(){a(o.result)}}})}),[c,f].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var u=this,a=[];return new Promise(function(n){u.iterateCursor(e,function(e){e?(a.push(e.value),void 0===t||a.length!=t?e.continue():n(a)):n(a)})})})});var p={open:function(e,t,a){var n=u(indexedDB,"open",[e,t]),o=n.request;return o.onupgradeneeded=function(e){a&&a(new d(o.result,e.oldVersion,o.transaction))},n.then(function(e){return new b(e)})},delete:function(e){return u(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=p,module.exports.default=module.exports):self.idb=p}(),sTORAGEmANAGER.prototype.createEmptyDb=function(e){var t=this.adapter.name,u=this.adapter.dbName;return new Promise(function(a){var n=[];Array.isArray(e)&&e.length>0?n=e:Object.keys(cLASS).forEach(function(e){"function"==typeof cLASS[e]&&cLASS[e].properties&&(cLASS[e].isAbstract||cLASS[e].isComplexDatatype||n.push(cLASS[e]))}),sTORAGEmANAGER.adapters[t].createEmptyDb(u,n).then(a)})},sTORAGEmANAGER.prototype.add=function(e,t){var u=this.adapter.name,a=this.adapter.dbName,n=this.createLog,o=this.validateBeforeSave,r=[],i=[];if("object"!=typeof t||Array.isArray(t)){if(!Array.isArray(t)||!t.every(function(e){return"object"==typeof e&&!Array.isArray(e)}))throw Error("2nd argument of 'add' must be a record or record list!");r=t}else r=[t];return e.properties.id&&"AutoNumber"===e.properties.id.range&&r.forEach(function(t){t.id||("function"==typeof e.getAutoId?t.id=e.getAutoId():void 0!==e.idCounter&&(t.id=++e.idCounter))}),o&&(r.forEach(function(t){var u=null;if(t instanceof e)i.push(t);else{try{u=new e(t)}catch(e){e instanceof ConstraintViolation?console.log(e.constructor.name+": "+e.message):console.log(e)}u&&i.push(u)}}),r=i),new Promise(function(t){sTORAGEmANAGER.adapters[u].add(a,e,r).then(function(){n&&console.log(r.length+" "+e.Name+"(s) added."),"function"==typeof t&&t()}).catch(function(e){console.log(e.name+": "+e.message)})})},sTORAGEmANAGER.prototype.retrieve=function(e,t){var u=this.adapter.name,a=this.adapter.dbName;return new Promise(function(n){sTORAGEmANAGER.adapters[u].retrieve(a,e,t).then(function(u){u||(u=null,console.log("There is no "+e.Name+" with ID value "+t+" in the database!")),n(u)})})},sTORAGEmANAGER.prototype.retrieveAll=function(e){var t=this.adapter.name,u=this.adapter.dbName;return new Promise(function(a){sTORAGEmANAGER.adapters[t].retrieveAll(u,e).then(function(t){var u=0;if(this.createLog&&console.log(t.length+" "+mcName+" records retrieved."),this.validateAfterRetrieve)for(u=0;u<t.length;u++)try{new e(t[u])}catch(e){e instanceof ConstraintViolation?console.log(e.constructor.name+": "+e.message):console.log(e.name+": "+e.message)}}).then(a)})},sTORAGEmANAGER.prototype.update=function(e,t,u){var a=this.adapter.name,n=this.adapter.dbName,o=this;return new Promise(function(r){var i=null,c=e.properties,s=[],f=!0,l=util.cloneObject(u);o.retrieve(e,t).then(function(o){if(o){if("object"==typeof o&&o.constructor!==e&&!(o=e.createObjectFromRecord(o)))return;i=util.cloneObject(o);try{Object.keys(u).forEach(function(e){var t=o[e],a=u[e],n=c[e];"id"!==e&&(void 0===n.maxCard||1===n.maxCard?(Number.isInteger(t)&&""!==a?a=parseInt(a):"number"==typeof t&&""!==a?a=parseFloat(a):void 0===t&&""===a&&(a=void 0),a!==t?(s.push(e),o.set(e,a)):delete l[e]):t.length!==a.length||t.some(function(e,t){return e!==a[t]})?(o.set(e,a),s.push(e)):delete l[e])})}catch(e){console.log(e.constructor.name+": "+e.message),f=!1,o=i}f&&(s.length>0?sTORAGEmANAGER.adapters[a].update(n,e,t,u,l).then(function(){console.log("Properties "+s.toString()+" of "+e.Name+" "+t+" updated."),"function"==typeof r&&r()}):console.log("No property value changed for "+e.Name+" "+t+"!"))}})})},sTORAGEmANAGER.prototype.destroy=function(e,t){var u=this.adapter.name,a=this.adapter.dbName,n=this;return new Promise(function(o){n.retrieve(e,t).then(function(n){n?sTORAGEmANAGER.adapters[u].destroy(a,e,t).then(function(){console.log(e.Name+" "+t+" deleted."),"function"==typeof o&&o()}):console.log("There is no "+e.Name+" with ID value "+t+" in the database!")})})},sTORAGEmANAGER.prototype.clearTable=function(e){var t=this.adapter.name,u=this.adapter.dbName;return new Promise(function(a){sTORAGEmANAGER.adapters[t].clearTable(u,e).then(a)})},sTORAGEmANAGER.prototype.clearDB=function(){var e=this.adapter.name,t=this.adapter.dbName;return new Promise(function(u){("function"==typeof confirm&&confirm("Do you really want to delete all data?")||"function"!=typeof confirm)&&sTORAGEmANAGER.adapters[e].clearDB(t).then(u)})},sTORAGEmANAGER.prototype.saveOnUnload=function(){var e=this.adapter.name,t=this.adapter.dbName;sTORAGEmANAGER.adapters[e].saveOnUnload(t)},sTORAGEmANAGER.adapters={},sTORAGEmANAGER.adapters.LocalStorage={createEmptyDb:function(e,t){return new Promise(function(e){e()})},add:function(e,t,u){return new Promise(function(e){var a=null;Array.isArray(u)||(u=[u]),u.forEach(function(e){a=new t(e),t.instances[a.id]=a}),e(a)})},retrieve:function(e,t,u){return new Promise(function(e){e(t.instances[u])})},retrieveLsTable:function(e){var t="",u=[],a=0,n="",o={},r=util.class2TableName(e.Name);try{localStorage[r]&&(n=localStorage[r])}catch(e){console.log("Error when reading from Local Storage\n"+e)}if(n)for(o=JSON.parse(n),u=Object.keys(o),console.log(u.length+" "+e.Name+" records loaded."),a=0;a<u.length;a++)t=u[a],e.instances[t]=e.createObjectFromRecord(o[t])},retrieveAll:function(e,t){return new Promise(function(e){e(Object.keys(t.instances).map(function(e){return t.instances[e]}))})},update:function(e,t,u,a){return new Promise(function(e){e()})},destroy:function(e,t,u){return new Promise(function(e){delete t.instances[u],e()})},clearTable:function(e,t){return new Promise(function(e){var u=t.tableName||util.class2TableName(t.Name);t.instances={};try{localStorage[u]=JSON.stringify({}),console.log("Table "+u+" cleared.")}catch(e){console.log("Error when writing to Local Storage\n"+e)}e()})},clearDB:function(){return new Promise(function(e){Object.keys(cLASS).forEach(function(e){var t="";if(!cLASS[e].isComplexDatatype&&Object.keys(cLASS[e].instances).length>0){cLASS[e].instances={},t=mc.tableName||util.class2TableName(cLASS[e].Name);try{localStorage[t]=JSON.stringify({})}catch(e){console.log("Error when writing to Local Storage\n"+e)}}}),e()})},saveOnUnload:function(){Object.keys(cLASS).forEach(function(e){var t="",u={},a=null,n=0,o=null,r=[],i="";if(cLASS[e].instances){for(o=cLASS[e],r=Object.keys(o.instances),i=util.class2TableName(o.Name),n=0;n<r.length;n++)t=r[n],a=o.instances[t],u[t]=a.toRecord();try{localStorage[i]=JSON.stringify(u),console.log(r.length+" "+o.Name+" records saved.")}catch(e){console.log("Error when writing to Local Storage\n"+e)}}})}},sTORAGEmANAGER.adapters.IndexedDB={createEmptyDb:function(e,t){return new Promise(function(u){idb.open(e,1,function(e){t.forEach(function(t){var u=t.tableName||util.class2TableName(t.Name),a=t.primaryKey||"id";e.objectStoreNames.contains(u)||e.createObjectStore(u,{keyPath:a})})}).then(u)})},add:function(e,t,u){return new Promise(function(a){var n=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(n,"readwrite"),a=t.objectStore(n);return Promise.all(u.map(function(e){return a.add(e)})).then(function(){return t.complete})}).then(a).catch(function(e){console.log(e.name+": "+e.message)})})},retrieve:function(e,t,u){return new Promise(function(a){var n=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){return e.transaction(n,"readonly").objectStore(n).get(u)}).then(function(e){void 0===e&&(e=null),a(e)}).catch(function(e){console.log(e.name+": "+e.message)})})},retrieveAll:function(e,t){return new Promise(function(u){var a=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){return e.transaction(a,"readonly").objectStore(a).getAll()}).then(function(e){void 0===e&&(e=[]),u(e)}).catch(function(e){console.log(e.name+": "+e.message)})})},update:function(e,t,u,a){return new Promise(function(n){var o=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(o,"readwrite"),n=t.objectStore(o);return a.id=u,n.put(a),t.complete}).then(n).catch(function(e){console.log(e.name+": "+e.message)})})},destroy:function(e,t,u){return new Promise(function(a){var n=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(n,"readwrite");return t.objectStore(n).delete(u),t.complete}).then(a).catch(function(e){console.log(e.name+": "+e.message)})})},clearTable:function(e,t){return new Promise(function(u){var a=t.tableName||util.class2TableName(t.Name);idb.open(e).then(function(e){var t=e.transaction(a,"readwrite");return t.objectStore(a).clear(),t.complete}).then(u).catch(function(e){console.log(e.name+": "+e.message)})})},clearDB:function(e){return new Promise(function(t){idb.open(e).then(function(e){var t=e.transaction(e.objectStoreNames,"readwrite");return Promise.all(Array.from(e.objectStoreNames,function(e){return t.objectStore(e).clear()})).then(function(){return t.complete})}).then(t).catch(function(e){console.log(e.name+": "+e.message)})})},saveOnUnload:function(e){}};